(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{4697:function(e,t,r){"use strict";var n=r(2122),a=r(2949),i=r(7294),o=(r(5697),r(6010)),s=r(4670),c=r(2318),l=i.forwardRef((function(e,t){var r=e.action,s=e.avatar,l=e.classes,u=e.className,d=e.component,m=void 0===d?"div":d,p=e.disableTypography,g=void 0!==p&&p,f=e.subheader,v=e.subheaderTypographyProps,h=e.title,Z=e.titleTypographyProps,b=(0,a.Z)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),y=h;null==y||y.type===c.Z||g||(y=i.createElement(c.Z,(0,n.Z)({variant:s?"body2":"h5",className:l.title,component:"span",display:"block"},Z),y));var k=f;return null==k||k.type===c.Z||g||(k=i.createElement(c.Z,(0,n.Z)({variant:s?"body2":"body1",className:l.subheader,color:"textSecondary",component:"span",display:"block"},v),k)),i.createElement(m,(0,n.Z)({className:(0,o.Z)(l.root,u),ref:t},b),s&&i.createElement("div",{className:l.avatar},s),i.createElement("div",{className:l.content},y,k),r&&i.createElement("div",{className:l.action},r))}));t.Z=(0,s.Z)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(l)},6846:function(e,t,r){"use strict";var n=r(5318),a=r(862);t.Z=void 0;var i=a(r(7294)),o=(0,n(r(2108)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"ClearOutlined");t.Z=o},5166:function(e,t,r){"use strict";var n=r(5318),a=r(862);t.Z=void 0;var i=a(r(7294)),o=(0,n(r(2108)).default)(i.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");t.Z=o},1117:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var n=r(6265),a=r(7294),i=r(1120),o=r(1749),s=r(282),c=r(2283),l=r(5166),u=r(6846),d=r(5477),m=r(8302),p=(0,r(3786).Z)(a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),g=a.createElement,f=(0,i.Z)((function(e){return{}})),v=function(e){var t=e.onEdit,r=e.onCancel,n=e.onDelete,i=e.onSave,o=e.editing,c=e.submitting,v=f();return g(a.Fragment,null,c&&g(d.Z,{size:30}),!o&&!c&&g("div",{className:v.blockButton},g(s.Z,{color:"primary",variant:"outlined",onClick:t},g(l.Z,null))),o&&!c&&g(a.Fragment,null,r&&g("div",{className:v.blockButton},g(s.Z,{variant:"outlined",onClick:function(e){e.preventDefault(),r&&r()}},g(u.Z,null))),i&&g("div",{className:v.blockButton},g(s.Z,{type:"submit",variant:"outlined",onClick:function(e){e.preventDefault(),i&&i()}},g(m.Z,null))),n&&g("div",{className:v.blockButton},g(s.Z,{type:"submit",variant:"outlined",onClick:function(e){e.preventDefault(),n&&n()}},g(p,null)))))},h=r(9090),Z=r(4179),b=a.createElement,y=(0,i.Z)((function(e){return{stickyickyicky:(0,n.Z)({position:"sticky",top:"75px"},e.breakpoints.up("md"),{top:"75px"}),submitButton:{marginTop:e.spacing(3),marginBottom:e.spacing(3),textTransform:"none",textDecoration:"none",padding:"14px 29px",borderRadius:13,background:"linear-gradient(45deg, #009fe0 5%, #009fe0 90%)"}}}));function k(e){var t=e.sections,r=e.title,n=e.subtitle,i=e.onEdit,l=e.onSubmit,u=e.onCancel,d=e.onDelete,m=e.submitting,p=e.forceEdit,g=e.initializeSave,f=e.hideControls,k=e.submitText,x=y(),j=(0,c.cI)(),P=j.handleSubmit,w=j.register,N=j.control,E=j.errors,O=j.unregister,T=j.watch,C=j.setValue,D=(0,a.useState)(!1),S=D[0],B=D[1];p&&!S&&B(!0);var _=P((function(e){console.log(e),l&&l(e)}));return(0,a.useEffect)((function(){g&&P(l)()}),[g]),b("form",null,t&&b(a.Fragment,null,r&&b(Z.Z,{variant:"h1",className:x.sectionHeader},r),n&&b(Z.Z,{variant:"h6",className:x.headerComment},n),b(o.Z,{container:!0,spacing:0},b(o.Z,{item:!0,container:!0,xs:12},Object.keys(t).map((function(e){var r=t[e];return b(h.Z,{key:e,title:r.name||e,editing:S,errors:E,register:w,unregister:O,watch:T,setValue:C,control:N,fields:r.fields})}))),!f&&b(o.Z,{item:!0,xs:1,className:x.stickyickyicky,style:{height:"1em"}},b(v,{onEdit:p?null:function(){i&&i(),B(!0)},onCancel:p?null:function(){u&&u(),B(!1)},onDelete:d,editing:S,submitting:m,onSave:_})),k&&b(s.Z,{onClick:_,color:"secondary",variant:"contained",disableElevation:!0,size:"large",className:x.submitButton},k||"Submit"))))}},5426:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7294),a=r(7229),i=n.createElement;function o(e){var t=e.projectListInProgress,r=e.projectList,n=e.value,o=e.drawerToggle;return i(a.Z,{levels:{Page:{loading:!1,value:"Projects",options:[{Projects:{text:"Projects",img:null,href:"/projects"}}]},Projects:{loading:t,value:n,valueField:"_id",textField:"projectName",imgField:"image.url",getHref:function(e){return"/projects/"+e._id},options:[r,{AllProjects:{_id:"projects",projectName:"View All Projects",avatarText:">",href:"/projects",showDivider:!0}},{CreateProject:{_id:"new",projectName:"Create Project",avatarText:"+",href:"/projects/new"}}]}},drawerToggle:o})}},3027:function(e,t,r){"use strict";r.d(t,{L:function(){return v}});var n=r(809),a=r.n(n),i=r(6265),o=r(2447),s=r(4121),c=r(7294),l=r(2804),u=r(8364),d=r(6252);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g={response:!1,inProgress:!1,error:!1},f=(0,l.cn)({key:"projectListAtom",default:g});function v(e){var t=(0,l.FV)(f),r=(0,s.Z)(t,2),n=r[0],i=r[1],m=(0,u.dQ)(),v=(0,s.Z)(m,3),h=v[0];v[1],v[2];(0,c.useEffect)((function(){e&&i(g)}),[]),(0,c.useEffect)((function(){!h||n.response||n.error||n.inProgress||function(){var e=(0,o.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(p(p({},n),{},{inProgress:!0})),e.next=4,(0,d.eK)(h);case 4:t=e.sent,i({response:t,inProgress:!1}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("useProject error"),console.error(e.t0),i({error:e.t0,inProgress:!1});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[h,n]);return[n.response,n.inProgress,n.error,function(){i(g)}]}},4572:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(4121),a=r(7294),i=r(1163),o=r(1630),s=r(4321),c=r(1120),l=r(3832),u=r(1749),d=r(9895),m=r(282),p=r(5477),g=r(8463),f=r(4697),v=r(9912),h=r(3027),Z=r(4179),b=r(5426),y=r(9681),k=r(8920),x=r(3457);r(1117),a.createElement,(0,c.Z)((function(e){return{cardRoot:{backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(4),paddingRight:e.spacing(0),paddingBottom:e.spacing(3)}}}));var j=r(5869),P=r(2283),w=r(9090),N=a.createElement,E=(0,c.Z)((function(e){return{loader:{maxHeight:"50vh"},hero:function(t){var r=t.imgUrl,n=t.darkThemeActive,a={backgroundColor:e.palette.background.default};return r&&!n&&(a.background="url("+r+") 50%/cover repeat fixed"),a.padding=e.spacing(4),a},headerPlus:{fontWeight:700,fontSize:"4.125rem",marginBottom:0,marginTop:e.spacing(1),lineHeight:1.05},headerLead:{lineHeight:1.5,color:e.palette.dlg.green},cardRoot:{backgroundColor:e.palette.background.paper,padding:e.spacing(4),borderRadius:9},imageWrapper:{display:"block",width:"100%",paddingTop:75},containerRoot:{minHeight:"70vh"},container:{padding:e.spacing(4)},formHeader:{marginBottom:0,marginTop:40},submitButton:{marginTop:e.spacing(3),marginBottom:e.spacing(3),textTransform:"none",textDecoration:"none",padding:"14px 29px",borderRadius:13,color:e.palette.common.white}}})),O=function(){var e=(0,h.L)(!0),t=(0,n.Z)(e,4),r=t[0],c=t[1],O=(t[2],t[3],(0,y.v$)()),T=(0,n.Z)(O,2),C=T[0],D=(T[1],(0,k.Z)()),S=(0,x.Z)(D.breakpoints.up("md")),B=(0,i.useRouter)().query.projectId,_=E({imgUrl:"/img/Valley-10s-1404px.svg",darkThemeActive:C}),L=(0,j.g)(),H=(0,n.Z)(L,10),R=H[0],z=(H[1],H[2]),V=H[3],F=H[4],I=H[5],M=H[6],A=H[7],U=(H[8],H[9]),q=(0,P.cI)(),W=q.handleSubmit,X=q.register,G=q.control,K=q.errors,Q=q.unregister,$=q.watch,J=q.setValue;return N(a.Fragment,null,N(o.y,{title:"Dataset Upload - Green Toolkit 2"}),N(s.Z,{hideSidebar:!0,disableHover:!0,title:N(b.Z,{projectList:r,projectListInProgress:c,value:r?B:""})},N("section",{className:_.hero},N(l.Z,{maxWidth:!1},N(u.Z,{container:!0,direction:"row",alignItems:"flex-start",justifyContent:"center",spacing:4},N(u.Z,{item:!0,container:!0,direction:"row",alignItems:"flex-start",justifyContent:"flex-start",className:_.header},N(u.Z,{item:!0,container:!0,md:5,xs:12},N(u.Z,{item:!0,container:!0,xs:12},N(Z.Z,{variant:"overline",className:_.headerLead},"Better Insights into Building Performance")),N(u.Z,{item:!0,container:!0,xs:12},N(Z.Z,{variant:"h1",className:S?_.headerPlus:_.headerMiddle},"Upload Data")),N(u.Z,{item:!0,container:!0,xs:12},N(Z.Z,{variant:"h4",className:_.subHeader},"Upload a custom data set. For more info on how to generate a compatible dataset click here."))),N(u.Z,{item:!0,container:!0,md:1,xs:12}),N(u.Z,{item:!0,container:!0,md:6,xs:12},N(d.Z,{variant:"outlined",className:_.cardRoot},N(w.Z,{editing:!0,register:X,control:G,errors:K,unregister:Q,setValue:J,watch:$,fields:{name:{name:"Dataset Name",value:R.projectName,description:"The human readable moniker for this dataset.",editOnly:!0,paragraph:!0,required:!0},descriptionShort:{name:"One Line Description",value:R.projectDescriptionShort,editOnly:!0,required:!1,paragraph:!0},dataset:{name:"Dataset",file:{multiple:!0,userPrompt:"Drag and drop your dataset files here (or click to use the system file browser)."},value:R.files,descrption:"Please select the dataset files (xlsx & images) that will be used with this dataset."}}}),N(u.Z,{container:!0,justifyContent:"center",alignItems:"center",direction:"column"},I&&N(u.Z,{item:!0},N(Z.Z,{variant:"overline"},I+"")),N(u.Z,{item:!0},N(m.Z,{onClick:W(z),color:"secondary",variant:"contained",disableElevation:!0,size:"large",className:_.submitButton},V?N(p.Z,null):"Analyze")))))),F&&N(u.Z,{item:!0,xs:12,md:10},N(g.Z,null,N(f.Z,{title:"Field Specification",subheader:"Define how each column in your dataset should be treated."}),N(v.Z,null,F.fields&&N(w.Z,{editing:!0,register:X,control:G,errors:K,unregister:Q,setValue:J,watch:$,fields:F.fields.map((function(e){return{key:j.S+e.name,name:e.name,required:!0,paragraph:!0,value:e.type,select:[{key:"Number",value:"number"},{key:"Text",value:"text"},{key:"File Reference",value:"fileReference"}]}}))}),N(u.Z,{container:!0,justifyContent:"center",alignItems:"center",direction:"column"},U&&N(u.Z,{item:!0},N(Z.Z,{variant:"overline"},U+"")),N(u.Z,{item:!0},N(m.Z,{onClick:W((function(e){return M(e,B)})),color:"primary",variant:"contained",disableElevation:!0,size:"large",className:_.submitButton},A?N(p.Z,null):"Upload!")))))),F&&N(u.Z,{item:!0,xs:12})))),N("section",null)))}},6575:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datasets/new",function(){return r(4572)}])}},function(e){e.O(0,[774,158,19,967,177,60,491,930,894,888,179],(function(){return t=6575,e(e.s=t);var t}));var t=e.O();_N_E=t}]);