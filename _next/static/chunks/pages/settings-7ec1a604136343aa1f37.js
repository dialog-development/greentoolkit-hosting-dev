(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1729:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return fe}});var i=t(4121),a=t(7294),o=t(4321),r=t(4179),l=t(1630),u=(t(2236),t(7229),t(1120)),c=t(3832),s=t(8920),d=t(3457),p=t(9681),f=(t(9464),t(7922),t(8289),t(1872),t(664),t(1229)),g=t(8347),v=t(4096),m=t(1423),Z=t(9956),b=t(5517),h=a.createElement;function y(e){var n=e.children,t=e.value,i=e.index,a=(0,g.Z)(e,["children","value","index"]);return h("div",(0,f.Z)({role:"tabpanel",hidden:t!==i,id:"vertical-tabpanel-".concat(i),"aria-labelledby":"vertical-tab-".concat(i)},a),t===i&&h(Z.Z,{p:3},n))}var C=(0,u.Z)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",borderRadius:e.shape.borderRadius,minHeight:"90vh"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},titleRoot:{zIndex:100,position:"absolute",width:"161px",borderRight:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)},titleText:{marginTop:e.spacing(2),marginBottom:e.spacing(1)},tabPanelRoot:{width:"80%"},tabPanelTitle:{marginTop:e.spacing(0)}}})),k=(0,u.Z)((function(e){return{root:{marginTop:"52px"}}}));function T(e){var n=e.settings,t=C(),o=k(),l=a.useState(0),u=(0,i.Z)(l,2),c=u[0],s=u[1];return h("span",null,h("div",{className:t.titleRoot},h(r.Z,{className:t.titleText,variant:"h4",component:"h1",align:"center"}," Settings ")),h("div",{className:t.root},h(v.Z,{orientation:"vertical",variant:"scrollable",value:c,onChange:function(e,n){s(n)},"aria-label":"Setting Vertical Tab Nav",className:t.tabs,classes:o},n.map((function(e,n){return h(m.Z,(0,f.Z)({key:(e.key||e.tabTitle||e.title)+"-tabTitle",label:h(r.Z,null,e.tabTitle||e.title||e.key)},function(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}(0)))}))),n.map((function(e,n){return h(y,{key:(e.key||e.tabTitle||e.title)+"-tabPanel",className:t.tabPanelRoot,value:c,index:n},h(r.Z,{variant:"h3",className:t.tabPanelTitle},e.title||e.tabTitle||e.key),h(b.Z,null),e.content)}))))}var x=t(616),w=t(8767),N=t(8364),P=(t(1388),t(809)),_=t.n(P),E=t(2447),S=t(9742);function I(){return(I=(0,E.Z)(_().mark((function e(n){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.fy)("siteConfig/query/get",null,n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=(0,E.Z)(_().mark((function e(n,t){var i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.fy)("siteConfig/query/update",n,t);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){var e=(0,N.dQ)(),n=(0,i.Z)(e,3),t=n[0],a=(n[1],n[2],(0,w.useQuery)("siteConfig",(function(){return function(e){return I.apply(this,arguments)}(t)}),{enabled:!!t})),o=a.isLoading,r=a.error;return[a.data,o,r,a.refetch]}var B=t(5477),O=t(1749),A=t(7812),Q=t(282),F=t(5894),G=t(7958),V=t(74),j=t(7162),W=t(553),X=t(6445),q=t(6019),z=t(2663),D=t(6856),H=t(9525),K=t(7212),U=t(6083),J=a.createElement;function M(e){var n=e.title,t=e.msg,i=void 0===t?"Are you sure you want to proceed?":t,a=e.confirmText,o=void 0===a?"Yes":a,r=e.cancelText,l=void 0===r?"No":r,u=e.open,c=e.onCancelled,s=e.onConfirmed,d=function(){c()};return J("div",null,J(z.Z,{open:u,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n&&J(U.Z,{id:"alert-dialog-title"},n),J(H.Z,null,J(K.Z,{id:"alert-dialog-description"},i)),J(D.Z,null,J(Q.Z,{onClick:d,color:"primary"},l),J(Q.Z,{onClick:function(){s()},color:"primary",autoFocus:!0},o))))}var Y=t(8463),$=a.createElement,ee=(0,u.Z)((function(e){return{formControlRoot:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function ne(e){var n=e.options,t=e.value,i=e.onChange,o=e.getOptionValue,l=e.getOptionLabel,u=e.noneLabel,c=e.getOptionKey,s=e.title,d=e.name,p=e.titleProps,f=void 0===p?{}:p,g=(0,a.useState)(null),v=g[0],m=g[1],Z=ee();return $(X.Z,{component:"fieldset"},s&&$(q.Z,{component:"legend"},$(r.Z,f,s)),$(j.Z,{"aria-label":d,name:d,value:t,onChange:function(e){m(e.target.value)}},$(O.Z,{container:!0,spacing:3},n.map((function(e){return $(O.Z,{key:c(e),item:!0},$(Y.Z,null,$(W.Z,{className:Z.formControlRoot,labelPlacement:"top",value:o(e),control:$(V.Z,null),label:l(e)})))})),$(O.Z,{item:!0},$(Y.Z,null,$(W.Z,{labelPlacement:"top",value:"",control:$(V.Z,null),label:u}))))),$(M,{open:null!==v,onCancelled:function(){return m(null)},onConfirmed:function(){i(v),m(null)}}))}function te(){var e=(0,N.dQ)(),n=(0,i.Z)(e,3),t=n[0],a=(n[1],n[2],(0,w.useMutation)((function(e){return function(e,n){return R.apply(this,arguments)}(e.configChanges,t)})));return[a.data,a.isLoading,a.error,function(e){a.mutate({configChanges:e})},a.reset]}var ie=t(1015),ae=t(103),oe=t(4705),re=t(9991),le=a.createElement;var ue=(0,u.Z)((function(e){return{root:{marginBottom:e.spacing(3)},uploadButton:{marginTop:e.spacing(2)}}}));function ce(){var e=ue(),n=L(),t=(0,i.Z)(n,4),o=t[0],l=t[1],u=(t[2],t[3]),c=function(e){var n=(0,N.dQ)(),t=(0,i.Z)(n,1)[0],a=(0,w.useQuery)(["siteConfigPredesign",null===e||void 0===e?void 0:e.predesignId],(function(){return(0,F.WB)(null===e||void 0===e?void 0:e.predesignId,t)}),{enabled:!(null===e||void 0===e||!e.predesignId)&&!!t}),o=a.isLoading,r=a.error;return[a.data,o,r,a.refetch]}(o),s=(0,i.Z)(c,3),d=(s[0],s[1],s[2],function(){var e=(0,N.dQ)(),n=(0,i.Z)(e,1)[0],t=(0,w.useQuery)("siteConfigAvailablePredesigns",(function(){return(0,F.Jo)(n)}),{enabled:!!n}),a=t.isLoading,o=t.error;return[t.data,a,o,t.refetch]}()),p=(0,i.Z)(d,4),f=p[0],g=p[1],v=(p[2],p[3]);(0,a.useEffect)((function(){o&&v()}),[o]);var m=te(),Z=(0,i.Z)(m,5),b=Z[0],h=Z[1],y=(Z[2],Z[3]),C=Z[4];(0,a.useEffect)((function(){b&&(u(),C())}),[b]);var k=(0,oe.NX)(),T=(0,re.Gi)(),x=a.useState(!1),P=(0,i.Z)(x,2),_=P[0],E=P[1];function S(){T(null),k({datasetId:null}),E(!1)}return le("section",{className:e.root},le(r.Z,{variant:"h4"},"Predesign Area"),le("div",null,l&&le(B.Z,null),o&&!(null!==o&&void 0!==o&&o.predesignId)&&le(r.Z,null,"There's currently nothing configured as the predesign dataset. Please select upload a new dataset or select an existing one from below!"),g&&le(B.Z,null),h&&le(B.Z,null),f&&!h&&le("div",null,le(ne,{title:"Available Source Datasets",selected:null===o||void 0===o?void 0:o.predesignId,options:f,getOptionKey:function(e){return e._id},getOptionLabel:function(e){return le(O.Z,{container:!0,justifyContent:"center",direction:"row",wrap:"nowrap"},le(O.Z,{item:!0,style:{minWidth:"30px"}}),le(O.Z,{container:!0,item:!0,direction:"column"},le(O.Z,{item:!0,container:!0,justifyContent:"center"},le(O.Z,{item:!0},le(ie.Z,null))),le(O.Z,{item:!0},le(r.Z,null,e.name))),le(O.Z,{item:!0,style:{minWidth:"30px"}},le(A.Z,{size:"small",onClick:function(n){n.preventDefault(),console.log("clicked!"),function(e){k({datasetId:e._id}),T(e.currentVersion),E(!0)}(e)}},le(ae.Z,null))))},noneLabel:le(O.Z,{container:!0,direction:"column"},le(O.Z,{item:!0,container:!0,justifyContent:"center"},le(O.Z,{item:!0},le(ie.Z,null))),le(O.Z,{item:!0},le(r.Z,null,"None \ud83d\udea7"))),getOptionValue:function(e){return e._id},value:(null===o||void 0===o?void 0:o.predesignId)||"",titleProps:{variant:"h5",gutterBottom:!0},onChange:function(e){return y({predesignId:e})}}),le("div",{styl:{position:"relative",width:"100%"}},le(Q.Z,{className:e.uploadButton,variant:"contained",color:"primary",onClick:function(){E(!0)}},"Upload New"),le(G.o,{open:_,onCancelled:function(){S()},typeId:"source",onComplete:function(){console.log("upload complete!"),S(),v()}})))))}function se(e){return(0,x.Z)(e),le(a.Fragment,null,le(ce,null),le(b.Z,null))}var de=a.createElement,pe=(0,u.Z)((function(e){return{container:{marginBottom:e.spacing(3),padding:e.spacing(3)}}}));function fe(){var e=(0,p.v$)(),n=(0,i.Z)(e,2),t=(n[0],n[1],pe()),u=(0,s.Z)();(0,d.Z)(u.breakpoints.up("md"));return de(a.Fragment,null,de(l.y,{title:"Settings - Green Toolkit 2"}),de(o.Z,{hideSidebar:!0,disableHover:!0,title:de(r.Z,{variant:"h4",component:"h1"},"Green Toolkit")},de(c.Z,{className:t.container},de(T,{title:"Settings",settings:[{tabTitle:"Admin",title:"Site Configuration Settings",content:de(se,null)},{tabTitle:"Account",title:"User Account & Profile Settings",content:de(a.Fragment,null,"\ud83c\udfc4\u200d\u2642\ufe0f\ud83d\udc68\u200d\ud83d\ude80\ud83d\udc69\u200d\ud83d\ude80\ud83c\udfc4\u200d\u2642\ufe0f")}]}))))}},6944:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(1729)}])}},function(e){e.O(0,[774,158,296,19,967,177,351,464,159,491,930,894,440,888,179],(function(){return n=6944,e(e.s=n);var n}));var n=e.O();_N_E=n}]);