(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{5131:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var r=n(1229),o=n(8347),i=n(7294),a=n(1120),u=n(282),c=n(6010),l=i.createElement,s=(0,a.Z)((function(e){return{warning:{backgroundColor:e.palette.warning.main,color:e.palette.getContrastText(e.palette.warning.main)},altWarning:{backgroundColor:e.palette.warning.main,color:e.palette.common.white},error:{backgroundColor:e.palette.error.main,color:e.palette.getContrastText(e.palette.error.main)}}})),d=i.forwardRef((function(e,t){var n=e.children,i=e.disabled,a=e.color,d=e.className,f=(0,o.Z)(e,["children","disabled","color","className"]),p=s(),g={warning:p.warning,error:p.error,altWarning:p.altWarning}[a];return l(u.Z,(0,r.Z)({color:g?void 0:a,disabled:i,className:(0,c.Z)(g,d)},f,{innerRef:t}),n)}))},5597:function(e,t,n){"use strict";n.d(t,{X:function(){return W}});var r=n(9999),o=n(1229),i=n(6265),a=n(7294),u=n(1120),c=n(4845),l=n(9803),s=n(1749),d=n(4179),f=n(5431),p=n(4689),g=n(8463),m=n(1907),v=n(9912),h=n(2318),y=n(951),b=n(3258),Z=a.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=(0,u.Z)((function(e){return{root:{minWidth:140},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},media:{height:70,objectFit:"scale-down"},contentRoot:{paddingBottom:e.spacing(0)},actionsRoot:{paddingTop:e.spacing(0),justifyContent:"center"}}}));function C(e){var t=e.image,n=void 0===t?"/static/images/cards/contemplative-reptile.jpg":t,r=e.title,o=e.checked,i=e.onChange,a=x();Z("span",{className:a.bullet},"\u2022");return Z(g.Z,{className:a.root},Z(y.Z,{className:a.media,image:n,title:"Contemplative Reptile"}),Z(v.Z,{className:a.contentRoot},Z(d.x,{variant:"h5",gutterBottom:!0,component:"h2"},r),Z(h.Z,{variant:"body2",component:"p"})),Z(m.Z,{className:a.actionsRoot},Z(b.Z,{size:"small",style:{alignSelf:"center"},onChange:function(e){i(e.target.checked)},checked:o})))}var O=(0,u.Z)((function(e){return{gridParent:{},gridRoot:{}}})),P={0:"https://i.imgur.com/h1hxfeh.png",.2:"https://i.imgur.com/Qt0PdUk.png",.4:"https://i.imgur.com/dOEItFX.png",.6:"https://i.imgur.com/SVEAbnc.png",.8:"https://i.imgur.com/h1hxfeh.png",1:"https://i.imgur.com/Qt0PdUk.png"},S={L:"https://i.imgur.com/h1hxfeh.png",podium:"https://i.imgur.com/Qt0PdUk.png",tower:"https://i.imgur.com/dOEItFX.png",toroid:"https://i.imgur.com/SVEAbnc.png"};function j(){return function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]}(S)}function E(e){var t,n=e.fieldInfo,o=e.setFilterMap,i=e.filterMap,a=O(),u=(null===(t=i.get(n.fieldUniqueName))||void 0===t?void 0:t.value)||[];return Z("div",{className:a.gridParent},Z(d.x,{variant:"h5"},n.fieldUniqueName),Z(s.Z,{container:!0,spacing:3,className:a.gridRoot},n.options.map((function(e){var t=!!u.find((function(t){return t===e}));return Z(s.Z,{key:e,item:!0},Z(C,{image:P[e]||j(),title:e,checked:t,onChange:function(a){t!==a&&function(e,t){var a=new Map(i);if(t){var c=[].concat((0,r.Z)(u),[e]);a.set(n.fieldUniqueName,{fieldType:n.fieldType,value:c})}else{var l=u.filter((function(t){return t!==e}));0!==l.length?a.set(n.fieldUniqueName,w(w({},n),{},{value:l})):a.delete(n.fieldUniqueName)}o(a)}(e,a)}}))}))))}var I=n(8074),N=a.createElement;function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=(0,u.Z)((function(e){return{root:{width:"100%"}}})),R=I.Z;function B(e){var t,n=e.fieldInfo,r=e.setFilterMap,o=e.filterMap,i=D(),u=n.min!==n.max?n.min:n.min-1,l=n.min!==n.max?n.max:n.min+1,s=(null===(t=o.get(n.fieldUniqueName))||void 0===t?void 0:t.value)||[n.min,n.max],f=(0,a.useState)(s),p=f[0],g=f[1];(0,a.useEffect)((function(){var e,t=(null===(e=o.get(n.fieldUniqueName))||void 0===e?void 0:e.value)||[n.min,n.max];g(t)}),[o]);var m=n.fieldUniqueName+"-manual-slider",v=[{value:u,label:u.toFixed(2)},{value:l,label:l.toFixed(2)}];return N("div",{className:i.root},N(d.Z,{id:m,gutterBottom:!0,variant:"h5"},R(n.fieldUniqueName)),N(c.Z,{onChange:function(e,t){g(t)},onChangeCommitted:function(e,t){if(2===t.length){var i=new Map(o),a={fieldType:n.fieldType,fieldUniqueName:n.fieldUniqueName,value:t};"number"===n.fieldType&&(a.min=t[0],a.max=t[1]),i.set(n.fieldUniqueName,a),r(i)}else console.error("single value returned")},value:p,getAriaValueText:function(){return s[0]+" to "+s[1]},"aria-labelledby":m,min:u,step:.001,max:l,valueLabelDisplay:"auto",valueLabelFormat:function(e){return e.toFixed(2)},marks:v}))}function M(e){var t,n=e.fieldInfo,r=e.setFilterMap,i=e.filterMap,u=(null===(t=i.get(n.fieldUniqueName))||void 0===t?void 0:t.value)||[];return N(a.Fragment,null,N(f.ZP,{multiple:!0,fullWidth:!0,filterSelectedOptions:!0,getOptionSelected:function(e,t){return e===t},value:u,onChange:function(e,t){var o=new Map(i);0!==(null===t||void 0===t?void 0:t.length)?o.set(n.fieldUniqueName,T(T({},n),{},{value:t})):o.delete(n.fieldUniqueName),r(o)},options:n.options,renderInput:function(e){return N(l.Z,(0,o.Z)({},e,{variant:"standard",label:R(n.fieldUniqueName),placeholder:"Select options to include"}))}}))}var q={"in:HP Fraction":1,shape:2};var A=(0,u.Z)((function(e){return{}}));function W(e){var t=e.version,n=e.filterMap,o=e.setFilterMap,i=A(),a=(0,p.uW)(),u=(0,p.GC)();return N(s.Z,{container:!0,direction:"row",spacing:3,alignItems:"flex-start",justifyContent:"center"},N(s.Z,{xs:8,item:!0}),N(s.Z,{xs:4,item:!0,container:!0,direction:"row-reverse"}),t&&t.fieldInfo&&(0,r.Z)(t.fieldInfo).sort((function(e,t){return r=t,o=!(a||u),"number"===(n=e).fieldType&&"number"!==r.fieldType?o?-1:1:"number"!==n.fieldType&&"number"===r.fieldType?o?1:-1:0;var n,r,o})).map((function(e){var t=0,r=1,a=2,u=3,c="number"===e.fieldType?r:q[e.fieldUniqueName]?u:"text"===e.fieldType?a:t;return N(s.Z,{item:!0,container:!0,xs:11,key:e.fieldUniqueName,className:i.listItem},c===r&&N(B,{key:e.fieldUniqueName,fieldInfo:e,filterMap:n,setFilterMap:o}),c===a&&N(M,{key:e.fieldUniqueName,fieldInfo:e,filterMap:n,setFilterMap:o}),c===u&&N(E,{key:e.fieldUniqueName,fieldInfo:e,filterMap:n,setFilterMap:o}))})))}},5268:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(4121),o=n(7294),i=n(6265),a=n(9999),u=n(1082),c=function(e){var t=[],n=1e3,r=function(){},o=function(){},i=function e(t){t&&e.data(t),r(),o(),e.render()};i.render=function(){var o=!0;r=i.invalidate=function(){o=!1},function r(){if(!o)return!0;t.splice(0,n).map(e),a(r)}()},i.data=function(e){return r(),t=e.slice(0),i},i.add=function(e){t=t.concat(e)},i.rate=function(e){return arguments.length?(n=e,i):n},i.remaining=function(){return t.length},i.clear=function(e){return arguments.length?(o=e,i):(o(),i)},i.invalidate=r;var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};return i};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d,f={curveLinear:u.c_6,curveMonotoneX:u.FdL,curveMonotoneY:u.ak_,curveStep:u.eA_},p=function(e,t){var n=t.map((function(t){var n=e.domains.get(t.fieldUniqueName);if(n){var r=e.isVertical?u.BYU().range([e.getWidth()-e.margin.right,e.margin.right]):u.BYU().range([e.height,e.margin.top]);return r.domain(n),s(s({},t),{},{domain:n,scale:r})}}));e.x=e.isVertical?new Map(Array.from(n.map((function(e){return e})),(function(e){return[e.fieldUniqueName,e]}))):u.q2y(n.map((function(e){return e.fieldUniqueName})),[e.margin.left,e.getWidth()-e.margin.right]),e.y=e.isVertical?u.q2y(n.map((function(e){return e.fieldUniqueName})),[e.margin.top,e.height-e.margin.bottom]):new Map(Array.from(n.map((function(e){return e})),(function(e){return[e.fieldUniqueName,e]}))),e.z=e.isVertical?u.cJy(e.x.get(e.shader).scale.domain(),(function(t){return e.color(1-t)})):u.cJy(e.y.get(e.shader).scale.domain(),(function(t){return e.color(1-t)}))},g=function(e){var t=e.initDimensions.map((function(t){return{key:t.fieldUniqueName,position:e.isVertical?e.y([t.fieldUniqueName]):e.x([t.fieldUniqueName])}}));e.svg.attr("width",e.getWidth()),u.td_(".dimension").data(t).attr("transform",(function(t){return e.isVertical?"translate(0, ".concat(t.position,")"):"translate(".concat(t.position,", 0)")})),u.td_(".dimension").each((function(t){t.key&&(u.Ys(this).call(e.isVertical?u.LLu(e.x.get(t.key).scale).ticks(5):u.Khx(e.y.get(t.key).scale)),u.Ys(this).call((function(t){return t.selectAll("text").attr("font-size",e.fontSize)})))}))},m=function(e,t,n,o){e.foreground.clearRect(0,0,e.getWidth(),e.height);var i=e.isVertical?u.jvg().defined((function(e){return null!=(0,r.Z)(e,2)[1]})).curve(e.curve).context(e.foreground).x((function(t){var n=(0,r.Z)(t,2),o=n[0],i=n[1];return e.x.get(o).scale(i)})).y((function(t){var o=(0,r.Z)(t,1)[0];return o===n?e.y(o)+n.y:e.y(o)})):u.jvg().defined((function(e){return null!=(0,r.Z)(e,2)[1]})).curve(e.curve).context(e.foreground).y((function(t){var n=(0,r.Z)(t,2),o=n[0],i=n[1];return e.y.get(o).scale(i)})).x((function(t){var o=(0,r.Z)(t,1)[0];return o===n?e.x(o)+n.x:e.x(o)}));c((function(t){var n,r;e.foreground.globalCompositeOperation="darken",e.foreground.lineWidth=e.lineWidth,e.foreground.strokeStyle=(n=e.z(t[e.shader]),r=o?.005:1,"rgba".concat(null===n||void 0===n?void 0:n.substring(null===n||void 0===n?void 0:n.indexOf("("),null===n||void 0===n?void 0:n.indexOf(")")),", ").concat(r,")")),o&&o._id===t._id&&(e.foreground.strokeStyle="grey",e.foreground.lineWidth=8),e.foreground.beginPath(),i(u.kCc(e.sorted.map((function(e){return e.fieldUniqueName})),[t],(function(e,t){return[e,t[e]]}))),e.foreground.stroke()})).rate(100)(t)},v=function(e){e.svg.selectAll(".brush").each((function(t){var n=e.brushed.get(t);if(u.Ys(this).call(e.brush.move,null),n){var r=e.isVertical?e.x.get(t):e.y.get(t);u.Ys(this).call(e.brush.move,[r.scale(n[0]),r.scale(n[1])])}}))},h=function(e){var t=e.pc,n=e.height,r=e.margin,o=function(e,n){if(e.sourceEvent){if(null===e.selection)t.brushed.delete(n);else{var r=(t.isVertical?t.x.get(n):t.y.get(n)).scale.invert;t.brushed.set(n,[r(e.selection[0]),r(e.selection[1])])}t.onBrush(t.brushed)}};return e.isVertical?u.Yud().extent([[r.left-15,-15],[t.getWidth()+100,15]]).on("start brush end",o):u.Lae().extent([[-15,r.top-15],[15,n-r.bottom+15]]).on("start brush",o)},y=function(e){var t=e.pc,n=e.isVertical,r={},o=function(e){var o=r[e];return null==o?n?t.y(e):t.x(e):o};return u.ohM().on("start",(function(e,o){!function(e,o,i){r[o]=n?t.y(o):t.x(o)}(0,o)})).on("drag",(function(e,i){!function(e,i,a){r[i]=n?Math.min(t.height,Math.max(0,t.y(i)+e.y)):Math.min(t.getWidth(),Math.max(0,t.x(i)+e.x)),u.Ys(a).attr("transform",(function(t){return n?"translate(0, ".concat(e.y,")"):"translate(".concat(e.x,", 0)")})),t.sorted.sort((function(e,t){return o(e.fieldUniqueName)-o(t.fieldUniqueName)}))}(e,i,this)})).on("end",(function(e,o){!function(e,o,i){n?t.y.domain(t.sorted.map((function(e){return e.fieldUniqueName}))):t.x.domain(t.sorted.map((function(e){return e.fieldUniqueName}))),delete r[o],u.Ys(i).attr("transform",(function(e){return"translate(0,0)"})),m(t,t.data),g(t,t.sorted),t.onSort(t.sorted)}(0,o,this)}))},b=function(e){var t=e.container,n=e.width,r=e.height,o=e.margin,i=e.shader,c=e.dimensions,l=e.isVertical,s=e.onBrush,d=e.onSort,b="0.75rem",Z={};Z.fontSize=b,Z.lineWidth=2.5,Z.isVertical=l,Z.container=t,Z.width=n,Z.height=r,Z.margin=o,Z.curve=u.c_6,Z.onBrush=s,Z.onSort=d,Z.brushed=new Map,Z.initDimensions=c,Z.sorted=(0,a.Z)(Z.initDimensions),Z.validateShader=function(e,t){return e.find((function(e){return e.fieldUniqueName===t}))?t:Z.sorted[0].fieldUniqueName},Z.shader=Z.validateShader(Z.sorted,i),Z.invert="az",Z.domains=new Map,Z.initDimensions.forEach((function(e){Z.domains.set(e.fieldUniqueName,[e.max,e.min])})),Z.getWidth=function(){return Z.width},Z.svg=Z.container.select("svg"),Z.container.selectAll(".dimension").remove(),Z.svg.attr("width",Z.getWidth()).attr("height",Z.height+Z.margin.top+Z.margin.bottom),Z.foreground=Z.container.select("canvas").attr("width",Z.getWidth()).attr("height",Z.height+Z.margin.top+Z.margin.bottom).node().getContext("2d"),Z.brush=h({pc:Z,height:r,margin:o,isVertical:l}),Z.drag=y({pc:Z,margin:o,height:r,isVertical:l}),Z.svg.append("g").selectAll("g").data(Z.initDimensions.map((function(e){return e.fieldUniqueName}))).join("g").attr("class","dimension"),Z.svg.selectAll(".dimension").append("g").attr("class","brush").each((function(e){u.Ys(this).call(Z.brush)}));var k=u.Ys("#tooltip"),w=function(e){k&&k.style("display","none")};return Z.svg.selectAll(".dimension").append("g").call(Z.drag,undefined).attr("class","axis").call((function(e){return e.append("text").attr("x",l?o.left:o.top-50).attr("y",-10).attr("text-anchor",l?"start":"end").attr("font-size",b).attr("fill","currentColor").attr("class","label").text((function(e){return e.toUpperCase()})).attr("transform",l?"":"rotate(270, 0, 0)").on("mousemove",(function(e,t){return function(e,t){k.style("display","block").style("left",e.offsetX-20+"px").style("top",e.offsetY-40+"px").text(t)}(e,t)})).on("mouseout",w)})),Z.unload=function(){Z&&Z.svg||Z.svg.selectAll("*").remove()},Z.draw=function(e,t,n,r,o,i,a,c,l,s){var d=Z.container.select("svg");if(d){Z.width=e,Z.height=t,Z.curve=f[n]||u.c_6,Z.lineWidth=o,Z.data=i,Z.color=r,Z.shader=Z.validateShader(Z.sorted,c);var h=Z.invert===s?Z.sorted:Z.sorted.reverse();Z.invert=s,p(Z,h),d.attr("width",Z.getWidth()),d.attr("height",Z.height+Z.margin.top+Z.margin.bottom),Z.container.select("canvas").attr("width",Z.getWidth()),Z.brushed=a,v(Z),m(Z,Z.data,null,l),g(Z,h)}},Z},Z=n(1120),k=n(8920),w=n(1749),x=n(2755),C=n(8966),O=n(8840),P=n(563),S=n(8322),j=n(8554),E=n(1911),I=n(9301),N=o.createElement,F=(0,Z.Z)((function(e){return{chart:{display:"block",position:"relative"},label:{cursor:"move"},canvas:{position:"absolute"},svg:{position:"absolute"},card:{width:"100%",marginBottom:e.spacing(2)},cardHeader:{marginTop:0,marginBottom:0},cardSubHeader:{marginTop:0,marginBottom:0},formControl:{margin:e.spacing(1),minWidth:120},grid:{padding:e.spacing(3)},paper:{padding:e.spacing(3),marginTop:e.spacing(3)},stickyItem:{top:0,position:"sticky"},customTooltip:{backgroundColor:"rgba(97, 97, 97, 0.92)",position:"absolute",padding:"4px 8px",display:"none",borderRadius:9,fontSize:"0.6875rem",margin:2,fontWeight:500,color:"rgb(255, 255, 255)"}}})),T=function(e){var t=F(),n=(0,k.Z)(),i=e.isVertical,a=e.dimensions,c=e.data.response.filter((function(e){return!e.hasPreFilterRangeViolations})),l=e.width,s=e.height||75*a.length,f=(e.hovered,e.color),p=(0,S.Ex)(),g=(0,r.Z)(p,1)[0],m=(0,j.m4)(),v=(0,r.Z)(m,1)[0],h=(0,E.n)(),y=(0,r.Z)(h,1)[0],Z=(0,C.Y)(),T=(0,r.Z)(Z,1)[0],D=(0,P.v)(),R=(0,r.Z)(D,2),B=R[0],M=R[1],q=(0,O.UV)(),A=(0,r.Z)(q,2),W=(A[0],A[1]),_=(0,I.U)(),U=(0,r.Z)(_,1)[0],V=function(e){M(new Map(e)),W(0)},L=function(e){},H={top:n.spacing(7),right:25,bottom:n.spacing(0),left:25},z=(0,o.useRef)();return(0,o.useEffect)((function(){var e=u.Ys(z.current);e&&(d=new b({container:e,width:l,height:s,margin:H,shader:y,dimensions:a,isVertical:i,curve:g,onBrush:V,onSort:L}));return function(){d&&d.unload(e)}}),[]),(0,o.useEffect)((function(){c&&d&&d.draw(l,s,g,f,v,c,B,y,T,U)}),[l,s,g,f,v,c,y,B,T,U]),N(w.Z,{container:!0},N(w.Z,{item:!0,xs:12},c&&N(x.Z,null,(function(e){return N("div",{id:"chart",ref:z,className:t.chart,style:{height:s+H.top+H.bottom}},N("canvas",{className:t.canvas}),N("svg",{className:t.svg}),N("div",{id:"tooltip",className:t.customTooltip}))}))))},D=o.memo(T)},4705:function(e,t,n){"use strict";n.d(t,{k:function(){return Zt},Z:function(){return wt}});var r=n(809),o=n.n(r),i=n(6265),a=n(2447),u=n(4121),c=n(616),l=n(7294),s=n(2755),d=n(2236),f=n(1749),p=n(1120),g=n(3832),m=n(282),v=n(7655),h=n(3637),y=n(5639),b=n(5757),Z=n(5517),k=n(868),w=n(5477),x=n(8463),C=n(9912),O=n(7812),P=n(5268),S=n(2318),j=n(7202),E=n(5360),I=n(4179),N=n(5152),F=n(8074),T=l.createElement,D=(0,N.default)((function(){return Promise.all([n.e(960),n.e(234)]).then(n.bind(n,9234))}),{ssr:!1,loadableGenerated:{webpack:function(){return[9234]},modules:["../components/Charts/DataCharts.jsx -> ./PieChart"]}}),R=(0,N.default)((function(){return Promise.all([n.e(960),n.e(550)]).then(n.bind(n,8550))}),{ssr:!1,loadableGenerated:{webpack:function(){return[8550]},modules:["../components/Charts/DataCharts.jsx -> ./RadarChart"]}}),B=(0,N.default)((function(){return Promise.all([n.e(960),n.e(314)]).then(n.bind(n,7314))}),{ssr:!1,loadableGenerated:{webpack:function(){return[7314]},modules:["../components/Charts/DataCharts.jsx -> ./AxisChart"]}}),M=(0,N.default)((function(){return Promise.all([n.e(960),n.e(709)]).then(n.bind(n,1709))}),{ssr:!1,loadableGenerated:{webpack:function(){return[1709]},modules:["../components/Charts/DataCharts.jsx -> ./IndicatorChart"]}}),q=function(e){return{radar:T(R,{width:e.width,height:e.width,data:e.data,title:e.title,condensed:e.condensed,color:e.color}),pie:T(D,{width:e.width,height:e.width,title:e.title,data:e.data,condensed:e.condensed,color:e.color}),axis:T(B,{width:e.width,height:e.width,title:e.title,item:e.data,condensed:e.condensed,color:e.color}),indicator:T(M,{width:e.width,height:e.width,title:e.title,item:e.data,condensed:e.condensed,color:e.color})}[e.type]};function A(e){var t=e.item,n=e.version,r=e.charts,o=e.color,i=r.map((function(e){return function(e,t,n){var r=e.config,o=n.fieldInfo.filter((function(e){return r.includes(e.fieldUniqueName)})).reduce((function(e,t){return e[t.fieldUniqueName]=t,e}),{}),i=Object.keys(o).map((function(e){var n=void 0;if("text"===o[e].fieldType){var r=JSON.parse("["+t[e].replace(/ /g,"").split("|").join(",")+"]");if(!r||r.length<2)return;n=r[0].map((function(e,t){return{x:e,y:r[1][t]}}))}var i,a,u,c=(0,F.Z)(e),l=c.match(/\b(\w)/g).join("");return{key:c,acr:l,fieldType:o[e].fieldType,values:n,value:t[e],min:o[e].min,max:o[e].max,normalized:(i=t[e],a=o[e].min,u=o[e].max,u-a===0?1:(i-a)/(u-a))}}));return{config:o,name:e.name,type:e.type,data:i,hasAllData:i.length>0&&i.every((function(e){return e}))}}(e,t,n)}));return T(f.Z,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",direction:"row",spacing:3},i.filter((function(e){return e.hasAllData})).map((function(e,t){return T(f.Z,{xs:0===t||1===t?6:4,item:!0,key:t},T(s.Z,null,(function(t){return T(q,{type:e.type,width:t.width,height:t.width,config:e.config,data:e.data,title:e.name,condensed:e.condensed,color:o})})),T(I.Z,{variant:"overline",style:{lineHeight:1,fontWeight:200}},e.name))})))}var W=l.createElement,_=(0,p.Z)((function(e){return{root:function(t){return{maxWidth:t.maxWidth,border:"none",boxShadow:"none",borderRadius:9,padding:e.spacing(2)}},link:{"&:hover":{textDecoration:"none",color:e.palette.dlg.grey}},cardMedia:{borderRadius:9},cardHeader:{alignItems:"flex-start"},cardHeaderAction:{alignSelf:"center"},cardActions:{paddingLeft:11.5},cardContent:{padding:e.spacing(0),paddingBotton:e.spacing(0)},description:{marginTop:0,marginBottom:0,display:"block"},rounded:{width:e.spacing(7),height:e.spacing(7)},icons:{marginLeft:"auto"}}}));function U(e){var t,n=e.value,r=(e.image,e.selectedChart,e.selectedMetric),o=(e.version,e.isBookmarked),i=e.onBookmarkClick,a=e.onItemMouseEnter,u=e.onItemMouseLeave,c=e.onShowMoreClick;e.warningText,_({maxWidth:"100%"});return W(f.Z,{container:!0,spacing:3,alignItems:"flex-start",alignContent:"flex-start"},W(f.Z,{xs:7,item:!0},W(f.Z,{xs:12,item:!0},W(S.Z,{variant:"h2",display:"block",style:{margin:0,lineHeight:1,fontWeight:200}},null===(t=n[null===r||void 0===r?void 0:r.fieldUniqueName])||void 0===t?void 0:t.toFixed(2)),W(S.Z,{variant:"overline",display:"block",gutterBottom:!0,style:{margin:0,lineHeight:1.5,fontWeight:200}},null===r||void 0===r?void 0:r.parsedName))),W(f.Z,{xs:5,item:!0,container:!0,direction:"row-reverse"},W(k.ZP,{title:"See more detail",arrow:!0},W(O.Z,{"aria-label":"show more",onClick:c},W(E.Z,null))),W(k.ZP,{title:"Bookmark this datarow",arrow:!0},W(O.Z,{"aria-label":"show more",onClick:i,onMouseEnter:a,onMouseLeave:u},W(j.Z,{color:o?"secondary":"inherit"})))))}var V=n(4689),L=n(9991),H=n(3672),z=n(8767),G=n(2804),Y=n(8364),Q=n(5894),J=n(3138);function X(){var e=(0,J.o)($),t=(0,z.useMutation)((function(e){var t=e.datasetId,n=e.token;return(0,Q.wy)(t,n)}));return[e,function(){if(!e)throw Error("Not ready to delete");t.mutate(e)},t.data,t.isLoading,t.isError?t.error:null]}var $=(0,G.nZ)({key:"readyToDeleteState",get:function(e){var t=e.get,n=t(V.LJ);if(n)return null;var r=t(V.aN),o=t(Y.Yy);return!n&&null!==r&&void 0!==r&&r._id&&o?{datasetId:r._id,token:o}:null}}),K=n(6817),ee=n(1388),te=n(3245),ne=n(8180),re=n(4176);var oe=n(7095);var ie=n(8966),ae=n(6546),ue=n(8840),ce=n(6140),le=n(6010),se=n(6005),de=n(3454),fe=n(8302),pe=n(9988),ge=l.createElement;function me(e){var t=e.open,n=e.onCancelled,r=e.onConfirmed,o=e.saving,i=e.error,a=e.existingFilterSet,u=(0,V.uW)(),c=null;c=u?"What would you like to call your Predesign configuration?":a?"Are you sure you want to overwrite the current FilterSet?":"Would you like to save your current FilterSet?";var l=u?"Save Predesign Configuration":"Save FilterSet";return ge(pe.mQ,{open:t,onCancelled:n,onConfirmed:function(e){return r(e)},message:c,title:l,confirmText:a?"Overwrite":"Save",confirmColor:a?"warning":"primary",cancelText:"Cancel",inProgress:o,includeSpacer:!0,error:i,textFieldLabel:"Name",requireTextEntry:!a,textFieldValue:a?a.name:null,textFieldInputProps:{maxLength:50}})}function ve(e){var t=e.open,n=e.onCancelled,r=e.onConfirmed,o=e.saving,i=e.error;return ge(pe.mQ,{open:t,onCancelled:n,onConfirmed:function(e){return r(e)},message:"What would you like to call your Predesign configuration?",title:"Save Predesign Configuration",confirmText:"Save",confirmColor:"primary",cancelText:"Cancel",inProgress:o,includeSpacer:!0,error:i,textFieldLabel:"Name",requireTextEntry:!0,textFieldInputProps:{maxLength:50}})}function he(e){var t=e.open,n=e.onCancelled,r=e.onConfirmed,o=e.selectedFilterSetName;return ge(pe.mQ,{open:t,onCancelled:n,onConfirmed:r,title:"Change Filter Set",message:"Are you sure you want to apply the filter set ".concat(o,"?"," "," You'll lose any unsaved changes."),confirmText:"Confirm",confirmColor:"warning",includeSpacer:!0})}function ye(e){var t=e.open,n=e.onCancelled,r=e.onConfirmed,o=e.inProgress;return ge(pe.mQ,{open:t,message:"Are you sure you want to delete this dataset?",title:"Delete Dataset",onConfirmed:r,onXButton:n,onCancelled:n,confirmText:"Confirm Deletion",confirmColor:"warning",cancelColor:"default",cancelText:"Cancel",inProgress:o,includeSpacer:!0})}function be(e){var t=e.open,n=e.onCancelled,r=e.onConfirmed;e.existingFilterSet;return ge(pe.mQ,{open:t,message:"Are you sure you want to delete this filter set?",title:"Delete FilterSet",onConfirmed:r,onXButton:n,onCancelled:n,confirmText:"Confirm Deletion",confirmColor:"warning",cancelColor:"default",cancelText:"Cancel",includeSpacer:!0})}var Ze=n(8365),ke=n(5308),we=n(1959),xe=(0,G.cn)({key:"metricAtom",default:null});var Ce=n(1229),Oe=n(9999),Pe=n(9803),Se=n(5431),je=l.createElement;function Ee(e){var t=e.options,n=e.onChange,r=e.selected,o=(e.onDeleteOption,[{name:"New",_id:"new"}].concat((0,Oe.Z)(t)));return je("div",{style:{marginRight:8}},je(Se.ZP,{id:"dataset-select",options:o,getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e._id===t._id},autoHighlight:!0,autoComplete:!0,style:{width:200},renderInput:function(e){return je(Pe.Z,(0,Ce.Z)({},e,{label:"Filter Sets",variant:"outlined"}))},renderOption:function(e){return je(f.Z,{container:!0,justifyContent:"space-between",alignItems:"center",style:{margin:"0px",padding:"0px",overflow:"hidden"}},e.name)},onChange:function(e,t){e.preventDefault(),n(t)},value:r||null}))}var Ie=function(e){return e.majorVersion+"."+e.minorVersion};function Ne(e){var t=e.options,n=e.onChange,r=e.selected,o=(e.onDeleteOption,(0,Oe.Z)(t));return je("div",{style:{marginRight:8}},je(Se.ZP,{id:"version-select",options:o,getOptionLabel:Ie,getOptionSelected:function(e,t){return e._id===t._id},autoHighlight:!0,autoComplete:!0,style:{width:200},renderInput:function(e){return je(Pe.Z,(0,Ce.Z)({},e,{label:"Versions",variant:"outlined"}))},renderOption:function(e){return je(f.Z,{container:!0,justifyContent:"space-between",alignItems:"center",style:{margin:"0px",padding:"0px",overflow:"hidden"}},Ie(e))},onChange:function(e,t){e.preventDefault(),n(t)},value:r||null}))}var Fe=n(1146),Te=n(4670),De=n(9525),Re=n(2863),Be=n(2208),Me=n(5597),qe=l.createElement,Ae=(0,Te.Z)((function(e){return{root:{padding:e.spacing(2),overflow:"visible"}}}))(De.Z),We=(0,p.Z)((function(e){var t=function(e){return e.palette.background.paper}(e);return{messageBox:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),marginTop:e.spacing(3),paddingTop:e.spacing(3),background:t,backgroundClip:"padding-box",paddingBottom:e.spacing(2),borderRadius:"10px 10px 0px 0px",color:e.palette.getContrastText(e.palette.background.paper)},countLabel:{fontWeight:400,color:e.palette.getContrastText(e.palette.background.paper)},countBox:{position:"sticky",top:"64px",width:"100%",zIndex:101,background:t,backgroundClip:"padding-box",marginTop:e.spacing(3),marginBottom:e.spacing(3)},labelIcon:{verticalAlign:"middle"},warningColor:{color:e.palette.warning.main},disabledColor:{color:e.palette.action.disabled},contentRoot:{textAlign:"center"}}}));function _e(e){var t,n=e.open,r=e.count,o=e.onCancelled,a=e.error,u=e.countInProgress,c=e.limitExceeded,l=e.isVertical,s=e.version,d=e.filterMap,f=e.setFilterMap,p=We(),g=(0,V.uW)(),m=(0,te.yt)();return qe(Be.kH,{onClose:o,"aria-label":"pre-filter-dialog",open:n},qe(pe.$N,{id:"customized-dialog-title",onClose:o},g?"Configure Your Building":"Pre-Filters"),qe(Ae,{className:p.contentRoot},qe(I.Z,{variant:"overline",display:"block",gutterBottom:!0,style:{fontWeight:300,lineHeight:1.66}},g&&"Let's start limiting options by configurating some of the main properties of your building.",c&&!g&&"This dataset is currently a little too big to browse, let's start by locking in some prefilters until we can get below ".concat(m," options."),!c&&!g&&"You can use these prefilters to hide options that you know you're not interested in."),qe("div",{className:p.countBox},qe(I.Z,{className:p.countLabel,component:"span"},"Current option count: "," ",u?qe(Re.Z,{color:"disabled",className:p.labelIcon},"search"):c?qe(Re.Z,{className:(0,le.Z)([p.labelIcon,p.warningColor])},"error"):qe(Re.Z,{color:"primary",className:p.labelIcon},"checkCircle"),!u&&qe(I.Z,{display:"inline",variant:"h4",component:"p",color:"primary",className:(0,le.Z)((t={},(0,i.Z)(t,p.warningColor,c),(0,i.Z)(t,"countCount",!0),t))},"".concat(r||"No options available."))),u&&qe(w.Z,{className:p.disabledColor,size:30})),a&&qe(I.Z,{variant:"overline",display:"block",gutterBottom:!0,style:{fontWeight:300,lineHeight:1.66}},a),qe(Me.X,{isVertical:l,version:s,filterMap:d,setFilterMap:f})))}var Ue=l.createElement,Ve=(0,Te.Z)((function(e){return{root:{padding:e.spacing(2),overflow:"visible"}}}))(De.Z),Le=(0,p.Z)((function(e){!function(e){e.palette.background.paper}(e);return{contentRoot:{textAlign:"center",paddingBottom:e.spacing(3)}}}));function He(e){var t=e.open,n=e.selected,r=e.version,o=e.charts,i=e.color,a=e.onCancelled,u=Le();return Ue(Be.kH,{onClose:a,"aria-label":"charts-dialog",open:t},Ue(pe.$N,{id:"customized-dialog-title"},"Charts"),Ue(Ve,{className:u.contentRoot},n&&Ue(A,{item:n,version:r,charts:o,color:i})))}var ze=n(5131),Ge=n(7958),Ye=n(4161),Qe=n(1082),Je={interpolateCubehelixDefault:Qe.yBY,interpolateCool:Qe.vcY,interpolateMagma:Qe.Gii,interpolateSpectral:Qe.T0$,interpolateRainbow:Qe.ICD,interpolateBlues:Qe.sY$,interpolateCividis:Qe.r1t,interpolatePurples:Qe.XWu,interpolateWarm:Qe.AO_},Xe=Object.keys(Je),$e=(0,G.cn)({key:"colorAtom",default:Xe[2]});var Ke=n(1163),et=n(582),tt=n(2303),nt=n(2393),rt=n(6433),ot=n(3320),it=n(7167),at=n(8185),ut=n(563),ct=n(8322),lt=n(8554),st=n(1911),dt=n(9301),ft=l.createElement;var pt=function(e){var t=e.rows,n=e.dimensions,r=(0,ct.Ex)(),o=(0,u.Z)(r,2),i=o[0],a=o[1],c=l.useState(null),s=(0,u.Z)(c,2),d=s[0],p=s[1],g=(0,lt.m4)(),m=(0,u.Z)(g,2),h=m[0],b=m[1],Z=l.useState(null),w=(0,u.Z)(Z,2),x=w[0],C=w[1],P=(0,st.n)(),j=(0,u.Z)(P,2),E=j[0],I=j[1],N=l.useState(null),T=(0,u.Z)(N,2),D=T[0],R=T[1],B=(0,ut.v)(),M=(0,u.Z)(B,2),q=M[0],A=M[1],W=(0,dt.U)(),_=(0,u.Z)(W,2),U=_[0],V=_[1];return ft(f.Z,{container:!0},ft(f.Z,{xs:5,item:!0},ft(k.ZP,{title:"Clear brushed dimensions",arrow:!0},ft("span",null,ft(O.Z,{"aria-controls":"simple-menu2","aria-haspopup":"true",onClick:function(){A(new Map)},disabled:0===q.size},ft(nt.Z,null)))),ft(S.Z,{variant:"overline",display:"inline",gutterBottom:!0,style:{fontWeight:400,lineHeight:1.66}},q.size," / ",t," rows")),ft(f.Z,{xs:7,item:!0,container:!0,direction:"row-reverse"},ft(k.ZP,{title:"Apply color palette by dimension",arrow:!0},ft(O.Z,{"aria-controls":"simple-menu2","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)}},ft(ot.Z,null))),ft(v.Z,{disableScrollLock:!0,id:"simple-menu2",anchorEl:D,keepMounted:!0,open:Boolean(D),onClose:function(e){R(null)}},n.map((function(e){return e.fieldUniqueName})).map((function(e){return ft(y.Z,{key:e,selected:e===E,onClick:function(t){return function(e,t){I(t)}(0,e)}},(0,F.Z)(e))}))),ft(k.ZP,{title:"Apply line paths",arrow:!0},ft(O.Z,{"aria-controls":"simple-menu1","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)}},ft(tt.Z,null))),ft(v.Z,{disableScrollLock:!0,id:"simple-menu1",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:function(e){p(null)}},ct.yw.map((function(e,t){return ft(y.Z,{key:e,selected:t===ct.yw.indexOf(i),onClick:function(e){return function(e,t){a(ct.yw[t])}(0,t)}},e)}))),ft(k.ZP,{title:"Apply line weights",arrow:!0},ft(O.Z,{"aria-controls":"simple-menu3","aria-haspopup":"true",onClick:function(e){C(e.currentTarget)}},ft(rt.Z,null))),ft(v.Z,{disableScrollLock:!0,id:"simple-menu2",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:function(e){C(null)}},lt.rH.map((function(e,t){return ft(y.Z,{key:e,selected:t===lt.rH.indexOf(h),onClick:function(e){return function(e,t){b(lt.rH[t])}(0,t)}},e)}))),ft(k.ZP,{title:"Invert dimensions",arrow:!0},ft(O.Z,{"aria-controls":"simple-menu3","aria-haspopup":"true",onClick:function(e){return V((function(e){return"az"===e?"za":"az"}))}},"az"===U&&ft(it.Z,null),"za"===U&&ft(at.Z,null)))))},gt=(0,G.cn)({key:"activeFilterSetAtom",default:[]});var mt=n(6782),vt=n(9450),ht=l.createElement,yt=function(){return ht(f.Z,{item:!0,xs:12},ht(Ze.Z,{variant:"rect",width:"100%",height:900,style:{marginBotton:10,borderRadius:9}}),ht(Ze.Z,{width:"100%",height:70,style:{marginBotton:10,borderRadius:9}}))},bt=(0,p.Z)((function(e){return{containerRoot:function(t){return(0,c.Z)(t),{backgroundColor:e.palette.background.default,padding:e.spacing(4),minHeight:"100vh"}},stickyItem:{top:0,position:"sticky"},innerGridItem:{marginBottom:e.spacing(2)},charts:{width:650,padding:e.spacing(4)},fullCharts:{width:"auto"},card:{border:"none",boxShadow:"none",borderRadius:9,padding:e.spacing(1)},cardSection:{minHeight:"90vh"},customButton:{marginRight:e.spacing(1),borderRadius:9,padding:e.spacing(1.5),marginBottom:e.spacing(2)},customSelect:{marginBottom:e.spacing(2)},filterSet:{marginRight:e.spacing(1)},prefilterBadgeWarning:{backgroundColor:e.palette.warning.main},prefilterBadgeSuccess:{backgroundColor:e.palette.primary.main},overlayParentContainer:{position:"relative",width:"100%"},parcoordsContainer:{paddingTop:e.spacing(3),zIndex:10,gridArea:"1 / 1 / 2 / 2"},optionSpacer:{marginRight:e.spacing(1)}}})),Zt=(0,G.cn)({key:"_datasetDisplayRoutingAtom",default:{datasetId:null,projectId:null}});function kt(){var e=(0,te.yt)();return ht(I.Z,{variant:"h4",style:{marginTop:45}},"This dataset is currently a little too big to browse, let's start by locking in some prefilters until we can get below ",e," options.")}var wt=function(e){var t,n,r=e.datasetId,c=e.projectId,p=(0,G.Zl)(Zt);(0,l.useEffect)((function(){p({datasetId:r,projectId:c})}),[r,c]);var S=(0,Ke.useRouter)(),E=(0,V.GF)(),N=(0,u.Z)(E,3),F=N[0],T=(N[1],N[2]),D=(0,ee.we)(),R=(0,u.Z)(D,2),B=R[0],M=R[1],q=(0,te.wg)(),A=(0,u.Z)(q,3),W=A[0],_=A[1],J=A[2],$=(0,te.qG)(),pe=(0,et.p)(),ge=(0,u.Z)(pe,3),Ze=ge[0],Ce=ge[1],Pe=(ge[2],X()),Se=(0,u.Z)(Pe,5),je=(Se[0],Se[1]),Ie=Se[2],Te=Se[3],De=(Se[4],(0,ue.Xw)()),Re=(0,u.Z)(De,3),Be=Re[0],Me=Re[1],qe=(Re[2],(0,ue.UV)()),Ae=(0,u.Z)(qe,2),We=Ae[0],Ue=Ae[1],Ve=(0,ue.qn)(),Le=(0,u.Z)(Ve,2),Qe=Le[0],tt=Le[1],nt=(0,ie.v)(),rt=(0,u.Z)(nt,2),ot=rt[0],it=rt[1],at=(0,ie.Y)(),ut=(0,u.Z)(at,2),ct=(ut[0],ut[1]),lt=(0,ae.x)(),st=(0,u.Z)(lt,2),dt=st[0],ft=st[1],wt=(0,V.uW)(),xt=(0,H.D)(),Ct=(0,L.Vh)(),Ot=(0,u.Z)(Ct,2),Pt=Ot[0],St=Ot[1],jt=function(){var e=(0,G.FV)(xe),t=(0,u.Z)(e,2);return[t[0],t[1]]}(),Et=(0,u.Z)(jt,2),It=Et[0],Nt=Et[1],Ft=(0,K.N9)(),Tt=function(){var e=(0,G.FV)(gt),t=(0,u.Z)(e,2),n=t[0],r=t[1],o=(0,V.GF)(),i=(0,u.Z)(o,1)[0];return(0,l.useEffect)((function(){r((null===i||void 0===i?void 0:i.savedFilterSets)||[])}),[i]),[n,function(e){n.find((function(t){return t._id===e._id}))?r((function(t){return[].concat((0,Oe.Z)(t.filter((function(t){return t._id!==e._id}))),[e])})):r((function(t){return[].concat((0,Oe.Z)(t),[e])}))},function(e){r((function(t){return t.filter((function(t){return t._id!==e}))}))}]}(),Dt=(0,u.Z)(Tt,3),Rt=Dt[0],Bt=Dt[1],Mt=Dt[2],qt=l.useState(!0),At=(0,u.Z)(qt,2),Wt=At[0],_t=(At[1],function(e){ct(e)});function Ut(){return(Ut=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:it(t),Yt(Lt.charts);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wn&&!wn.find((function(e){return e._id===t._id}))?xn(t):Cn(t._id);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lt={none:0,save:1,prefilter:2,deleteDataset:3,confirmFilterSelect:4,charts:5,deleteFilterset:6,upload:7},Ht=(0,l.useState)(0),zt=Ht[0],Gt=Ht[1],Yt=function(e){return Gt(zt===e?Lt.none:e)},Qt=(0,l.useState)(!1),Jt=Qt[0],Xt=Qt[1];(0,l.useEffect)((function(){!$&&!J||Jt||zt===Lt.prefilter||(Xt(!0),Yt(Lt.prefilter))}),[$,J,zt,Jt,r]),(0,l.useEffect)((function(){$||Xt(!1)}),[r,$]);var $t=bt(),Kt=function(){var e=(0,z.useMutation)((function(e){var t=e.datasetId,n=e.filterSet,r=e.token;return(0,Q.Xd)(t,n,r)})),t=(0,Y.dQ)(),n=(0,u.Z)(t,3),r=n[0],o=(n[1],n[2],(0,G.sJ)(ee.TE)),i=(0,V.GF)(),a=(0,u.Z)(i,3),c=a[0],l=(a[1],a[2],(0,ne.aj)());return[e.data,e.isLoading,e.isError?e.error:null,function(t){var n=t.name;if(!c||!c._id)throw Error("No datasetId provided");var i=null===l||void 0===l||!l._id||"new"===l._id;if(console.log("Saving ".concat(i?"new ":"existing ".concat(null===l||void 0===l?void 0:l._id," "),"filter set.")),!n&&i)throw Error("Must provide dataset name");if(!o)throw Error("No filters provided");if(!r)throw Error("Must provide token");var a=(0,Q.pH)(o),u={_id:i?void 0:l._id,name:n,preFilters:a};e.mutate({datasetId:c._id,filterSet:u,token:r})}]}(),en=(0,u.Z)(Kt,4),tn=en[0],nn=en[1],rn=en[2],on=en[3];(0,l.useEffect)((function(){tn&&(console.log("saved!"),Yt(Lt.none),fn(!1),vn(tn),Bt(tn))}),[tn]);var an=function(){var e=(0,z.useMutation)((function(e){var t=e.predesignDatasetId,n=e.existingProjectId,r=e.datasetName,o=e.filterSet,i=e.datasetDescription,a=e.newProject,u=e.token;return(0,Q.RH)(t,n,r,o,i,a,u)})),t=(0,Y.dQ)(),n=(0,u.Z)(t,3),r=n[0],o=(n[1],n[2],(0,G.sJ)(ee.TE)),i=(0,V.GF)(),a=(0,u.Z)(i,1)[0],c=null===a||void 0===a?void 0:a._id,l=(0,oe.P)(),s=(0,u.Z)(l,1)[0],d=null===s||void 0===s?void 0:s._id,f=(0,G.sJ)(re.$);return[e.data,e.isLoading,e.isError?e.error:null,function(t){var n=t.name,i=t.description,a=t.newProject;if(!c)throw Error("No predesignDatasetId provided");if(!d)throw Error("No existingProjectId provided");if(!n)throw Error("Must provide dataset name");if(!o)throw Error("No filters provided");if(!r)throw Error("Must provide token");var u=(0,Q.pH)(o);console.log("Saving predesign ".concat(n));var l={name:n,preFilters:u,bookmarks:f};e.mutate({predesignDatasetId:c,existingProjectId:d,datasetName:n,filterSet:l,datasetDescription:i,newProject:a,token:r})}]}(),un=(0,u.Z)(an,4),cn=un[0],ln=(un[1],un[2],un[3]);(0,l.useEffect)((function(){null!==cn&&void 0!==cn&&cn._id&&(console.log("pre-design saved!"),Yt(Lt.none),S.push("/app?projectId=".concat(c,"&datasetId=").concat(cn._id)))}),[cn]);var sn=(0,l.useState)(!1),dn=sn[0],fn=sn[1],pn=(0,ne.ou)(),gn=(0,u.Z)(pn,2),mn=gn[0],vn=gn[1],hn=(0,l.useState)(null),yn=hn[0],bn=hn[1],Zn=(0,re.b)(),kn=(0,u.Z)(Zn,3),wn=kn[0],xn=kn[1],Cn=kn[2],On=function(){var e=(0,G.FV)($e),t=(0,u.Z)(e,2);return[t[0],t[1]]}(),Pn=(0,u.Z)(On,2),Sn=Pn[0],jn=Pn[1],En=l.useState(null),In=(0,u.Z)(En,2),Nn=(In[0],In[1],function(){var e=(0,z.useMutation)((function(e){var t=e.datasetId,n=e.filterSetId,r=e.token;return(0,Q.$l)(t,n,r)})),t=(0,Y.dQ)(),n=(0,u.Z)(t,3),r=n[0],o=(n[1],n[2],(0,V.GF)()),i=(0,u.Z)(o,1)[0],a=(0,ne.aj)();return[e.data,e.isLoading,e.isError?e.error:null,function(){if(!i||!i._id)throw Error("No datasetId provided");if(!a||!a._id)throw Error("No filterset id provided");if(!r)throw Error("Must provide token");console.log("deleting filter set ".concat(a._id," from dataset ").concat(i._id)),e.mutate({datasetId:i._id,filterSetId:a._id,token:r})}]}()),Fn=(0,u.Z)(Nn,4),Tn=Fn[0],Dn=Fn[1],Rn=(Fn[2],Fn[3]);(0,l.useEffect)((function(){Tn&&Mt(Tn.filterSetId)}),[Tn]);var Bn=mn&&"new"!==mn._id,Mn=l.useState(null),qn=(0,u.Z)(Mn,2),An=qn[0],Wn=qn[1],_n=Boolean(An),Un=function(){Wn(null)};(0,l.useEffect)((function(){Nt(null===Ft||void 0===Ft?void 0:Ft.dimensions[0])}),[]),(0,l.useEffect)((function(){!wt&&F&&vn(F.savedFilterSets[0])}),[wt,F]);var Vn=l.useState(null),Ln=(0,u.Z)(Vn,2),Hn=Ln[0],zn=Ln[1],Gn=(0,V.hT)()===V.qW.predesign;return ht(g.Z,{fixed:!0,className:$t.containerRoot},ht(l.Fragment,null,Ie&&ht(f.Z,{container:!0},ht(f.Z,{item:!0,xs:12},ht(I.Z,{variant:"h3",style:{marginBottom:0}},"Dataset removed"),ht(I.Z,{variant:"body1"},"Click ",ht(d.Z,{color:"secondary",href:"/projects/".concat(c),underline:"none"},"here")," to head back to the project page"))),!Ze||T&&ht(f.Z,{container:!0},ht(f.Z,{item:!0,xs:12},ht(I.Z,{variant:"h3",style:{marginBottom:0}},"Dataset not found"),ht(I.Z,{variant:"body1"},"Click ",ht(d.Z,{color:"inherit",href:"/projects/".concat(c),underline:"none"},"here")," to head back to the project page"))),!Ie&&F&&ht(f.Z,{container:!0,alignItems:"center",direction:"row",spacing:3},ht(f.Z,{item:!0,md:4,xs:12},ht("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:8,marginTop:0}},"predesign"===F.typeId&&ht(vt.Z,{color:"secondary"}),"source"===F.typeId&&ht(vt.Z,{color:"secondary"}),"es"===F.typeId&&ht(mt.Z,{color:"secondary"}),"source"!==F.typeId&&ht(I.Z,{variant:"body2",style:{marginLeft:8}},F.name))),ht(f.Z,{container:!0,md:8,item:!0,xs:12,direction:"row-reverse"},ht(m.Z,{variant:"outlined",className:$t.customButton,"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){return Wn(e.currentTarget)}},ht(Fe.Z,null)),ht(v.Z,{id:"fade-menu",anchorEl:An,keepMounted:!0,open:_n,onClose:Un,TransitionComponent:h.Z},Xe.map((function(e,t){return ht(y.Z,{key:e,selected:t===Xe.indexOf(Sn),onClick:function(e){return function(e,t){jn(Xe[t])}(0,t)}},t===Xe.indexOf(Sn)&&ht(we.Z,{style:{marginRight:12}}),ht(b.Z,{style:{marginLeft:t===Xe.indexOf(Sn)?0:36}},e))})),ht(Z.Z,null),!Gn&&!wt&&ht(y.Z,{onClick:function(e){Un(),Yt(Lt.upload)}},ht(se.Z,{style:{marginRight:12}}),"Upload data"),ht(y.Z,{onClick:function(){Un(),Yt(Lt.deleteDataset)}},ht(ke.Z,{style:{marginRight:12}}),"Delete dataset")),ht(k.ZP,{title:"Toggle bookmarked view",arrow:!0},ht(ze.j,{variant:"contained",color:dt.showBookmarks?"default":"secondary",onClick:function(){ft((function(e){return{showBookmarks:!(null!==e&&void 0!==e&&e.showBookmarks)}}))},disableElevation:!0,"aria-label":"bookmarks-dataset",className:(0,le.Z)($t.customButton)},ht(j.Z,null),"\xa0",(null===wn||void 0===wn?void 0:wn.length)||0)),ht(k.ZP,{title:"Pre-filter to de-clutter",arrow:!0},ht(ze.j,(t={className:$t.customButton,variant:"contained",color:zt===Lt.prefilter?"secondary":$||J?"altWarning":"default",disableElevation:!0,"aria-label":"pre-filter"},(0,i.Z)(t,"className",(0,le.Z)($t.customButton,$t.badgeChild)),(0,i.Z)(t,"selected",zt===Lt.prefilter),(0,i.Z)(t,"onClick",(function(){return Yt(Lt.prefilter)})),t),ht(de.Z,null),"\xa0",W,_&&ht(w.Z,{size:17.5}))),!wt&&!Gn&&ht("div",{className:$t.customSelect},ht(Ee,{options:Rt,selected:mn,onChange:function(e){dn?(console.log("outstanding changes, setting pending"),bn(e),Yt(Lt.confirmFilterSelect)):(console.log("no changes, setting set"),vn(e))},deleting:Dn})),!wt&&!Gn&&ht(k.ZP,{title:"Delete FilterSet",arrow:!0},ht(ze.j,{variant:"contained",disabled:!mn||mn&&"new"===mn._id,color:"default",onClick:function(e){Un(),Yt(Lt.deleteFilterset)},disableElevation:!0,"aria-label":"save-filterset",className:(0,le.Z)($t.customButton)},ht(ke.Z,null))),ht(k.ZP,{title:wt?"Save Configuration":"Save FilterSet",arrow:!0},ht(ze.j,{variant:"contained",disabled:!mn&&!wt,color:zt===Lt.save?"secondary":dn?"altWarning":"default",onClick:function(e){Yt(Lt.save)},disableElevation:!0,"aria-label":"save-filterset",className:(0,le.Z)($t.customButton)},ht(fe.Z,null))),wt&&!Gn&&ht("div",{className:$t.customSelect},ht(Ne,{options:xt||[],selected:Pt,onChange:St}))),!Ce&&$&&Jt&&zt===Lt.none&&ht(f.Z,{container:!0,style:{textAlign:"center"}},ht(f.Z,{item:!0,xs:12},ht(kt,null))),ht("div",{className:$t.overlayParentContainer},ht("div",{className:$t.parcoordsContainer},ht(f.Z,{container:!0,item:!0,xs:12,spacing:3},ht(f.Z,{item:!0,xs:12,md:7,lg:8},(Ce||_)&&ht(yt,null),!Ce&&!$&&!_&&Ft&&Ft.response&&ht(x.Z,{variant:"outlined",className:$t.card},ht(C.Z,null,ht(pt,{dimensions:Ft.dimensions,rows:Ft.response.length}),ht(s.Z,null,(function(e){if(e.width)return ht(P.Z,{isVertical:Wt,data:Ft,dimensions:Ft.dimensions,color:Je[Sn],width:e.width})}))))),ht(f.Z,{item:!0,xs:12,md:5,lg:4},(Ce||_)&&ht(yt,null),!Ce&&!_&&!$&&ht(x.Z,{variant:"outlined",className:(0,le.Z)($t.card)},ht(C.Z,null,ht(f.Z,{container:!0,spacing:3,alignItems:"center",alignContent:"center"},ht(f.Z,{xs:12,item:!0,container:!0,direction:"row-reverse"},ht(k.ZP,{title:"Toggle datarow metric",arrow:!0},ht(O.Z,{"aria-controls":"simple-menu2","aria-haspopup":"true",onClick:function(e){zn(e.currentTarget)}},ht(Ye.Z,null))),ht(v.Z,{id:"simple-menu2",anchorEl:Hn,keepMounted:!0,open:Boolean(Hn),onClose:function(e){zn(null)}},null===Ft||void 0===Ft||null===(n=Ft.dimensions)||void 0===n?void 0:n.filter((function(e){return"number"===e.fieldType})).map((function(e){return e})).map((function(e){return ht(y.Z,{key:e.fieldUniqueName,selected:e.fieldUniqueName===(null===It||void 0===It?void 0:It.fieldUniqueName),onClick:function(t){return function(e,t){Nt(t)}(0,e)}},e.parsedName)})))),!Ce&&!$&&!_&&Be.map((function(e,t){return ht(f.Z,{item:!0,md:12,key:t},ht(U,{value:e,selectedMetric:It,version:Pt,isBookmarked:null===wn||void 0===wn?void 0:wn.find((function(t){return t._id===e._id})),warningText:e.hasPreFilterRangeViolations&&"This bookmark is out of range based on current filters.",color:Je[Sn],onBookmarkClick:function(t){return function(e){return Vt.apply(this,arguments)}(e)},onItemMouseEnter:function(t){return _t(e)},onItemMouseLeave:function(e){return _t(null)},onShowMoreClick:function(t){return function(e){return Ut.apply(this,arguments)}(e)}}))}))),ht(f.Z,{container:!0,item:!0,xs:12,style:{marginTop:16},direction:"row-reverse"},!Ce&&!$&&!_&&Be&&Me>0&&ht(ce.Z,{component:"div",labelRowsPerPage:"",count:Me,page:We,onPageChange:function(e,t){Ue(t)},rowsPerPage:Qe||10,onRowsPerPageChange:function(e){tt(parseInt(e.target.value,10)),Ue(0)}})),ht(f.Z,{container:!0,item:!0,xs:12,style:{marginTop:16}},!Ft&&!(Ce||_)&&Be&&0===Me&&ht(I.Z,null,"No rows were returned based on your current filter."),(null===dt||void 0===dt?void 0:dt.showBookmarks)&&!$&&0===(null===wn||void 0===wn?void 0:wn.length)&&ht(I.Z,null,"No rows are currently bookmarked."))))))),!wt&&ht(me,{open:zt===Lt.save,onCancelled:function(){return Yt(Lt.none)},onConfirmed:function(e){return on({name:e})},saving:nn,error:null===rn||void 0===rn?void 0:rn.message,existingFilterSet:Bn?mn:null}),wt&&ht(ve,{open:zt===Lt.save,onCancelled:function(){return Yt(Lt.none)},onConfirmed:function(e){return ln({name:e})},saving:nn,error:null===rn||void 0===rn?void 0:rn.message}),ht(he,{open:zt===Lt.confirmFilterSelect&&mn,onCancelled:function(){return Yt(Lt.none)},onConfirmed:function(){Yt(Lt.none),fn(!1),vn(yn),bn(null)},selectedFilterSetName:null===mn||void 0===mn?void 0:mn.name}),ht(ye,{open:zt===Lt.deleteDataset,onCancelled:function(){return Yt(Lt.none)},onConfirmed:je,inProgress:Te}),ht(be,{open:zt===Lt.deleteFilterset,onCancelled:function(){return Yt(Lt.none)},existingFilterSet:mn,onConfirmed:function(){Rn({filterSetId:null===mn||void 0===mn?void 0:mn._id}),vn(null),Yt(Lt.none)}}),ht(_e,{open:zt===Lt.prefilter,isVertical:Wt,version:Pt,filterMap:B,setFilterMap:function(e){dn||fn(!0),M(e)},countInProgress:_,limitExceeded:$,count:W,onCancelled:function(){return Yt(Lt.none)}}),ht(He,{open:zt===Lt.charts,selected:ot,version:Pt,charts:[{type:"radar",name:"Normalized Input Distribution",config:["in:HP Fraction","in:Program 1 WWR","in:Program 2 WWR","in:ERV Efficiency","in:Window U-Value","in:Window SHGC","in:Roof R-Value","in:Wall R-Value"]},{type:"pie",name:"Total Energy Use Intensity (EUI)",config:["out:Lighting (kWh/m2)","out:Equipment (kWh/m2)","out:Fans (kWh/m2)","out:Pumps (kWh/m2)","out:DHW (kWh/m2)","out:Clg Energy (kWh/m2)","out:Htg Energy (kWh/m2)"]},{type:"pie",name:"Heating Cooling Split",config:["out:TEDI (kWh/m2)","out:CEDI (kWh/m2)"]},{type:"axis",name:"Heating Cooling Annual Load Profile",config:["out:Cooling Profile","out:Heating Profile"]},{type:"pie",name:"Total Greenhouse Gas Intensity (GHGI)",config:["out:Elec GHGI (kgCO2/m2)","out:Gas GHGI (kgCO2/m2)"]}],color:Je[Sn],onCancelled:function(){return Yt(Lt.none)}}),ht(Ge.o,{open:zt===Lt.upload,onCancelled:function(){return Yt(Lt.none)}})))))}},7958:function(e,t,n){"use strict";n.d(t,{o:function(){return g}});var r=n(1229),o=n(7294),i=n(4670),a=n(1120),u=n(9525),c=(n(4179),n(2208)),l=(n(5597),n(9988)),s=n(8622),d=o.createElement,f=(0,i.Z)((function(e){return{root:{padding:e.spacing(2),overflow:"visible"}}}))(u.Z),p=(0,a.Z)((function(e){var t=function(e){return e.palette.background.paper}(e);return{messageBox:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),marginTop:e.spacing(3),paddingTop:e.spacing(3),background:t,backgroundClip:"padding-box",paddingBottom:e.spacing(2),borderRadius:"10px 10px 0px 0px",color:e.palette.getContrastText(e.palette.background.paper)},countLabel:{verticalAlign:"middle",color:e.palette.getContrastText(e.palette.background.paper)},countBox:{position:"sticky",top:"64px",width:"100%",zIndex:101,background:t,backgroundClip:"padding-box",marginTop:e.spacing(3),marginBottom:e.spacing(3)},labelIcon:{verticalAlign:"middle"},warningColor:{color:e.palette.warning.main},disabledColor:{color:e.palette.action.disabled},contentRoot:{textAlign:"center"}}}));function g(e){var t=e.open,n=e.onCancelled,o=e.title,i=void 0===o?"Append To Dataset":o,a=e.onComplete,u=e.typeId,g=p(),m=u?{typeId:u}:{};return d(c.kH,{onClose:n,"aria-label":"pre-filter-dialog",open:t},d(l.$N,{id:"customized-dialog-title",onClose:n},i),d(f,{className:g.contentRoot},d(s.r,(0,r.Z)({},m,{onComplete:a}))))}},8622:function(e,t,n){"use strict";n.d(t,{r:function(){return E}});var r=n(1229),o=n(6265),i=n(4121),a=n(8347),u=n(7294),c=n(1163),l=n(1120),s=n(2318),d=n(1749),f=n(282),p=n(5477),g=n(5869),m=n(2283),v=n(9090),h=n(7661),y=n(1594),b=n(7257),Z=n(9905),k=n(2236),w=n(4179),x=(n(6010),n(4689)),C=u.createElement;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=(0,l.Z)((function(e){return{loader:{maxHeight:"50vh"},cardRoot:{backgroundColor:e.palette.background.paper,paddingLeft:e.spacing(4),paddingRight:e.spacing(0),paddingBottom:e.spacing(3)},dialogActions:{padding:e.spacing(3)},paperRoot:{padding:e.spacing(3)},root:{marginTop:40},flexContainer:{display:"flex",alignItems:"flex-start",minHeight:"100vh"},stickyContainer:{top:0,right:0,position:"absolute"},stickyItem:{top:0,position:"sticky"},contentBody:{width:"50%"},gridRoot:{flexGrow:1},rootIcon:{color:"#eaeaf0",display:"flex",height:22,alignItems:"center"},active:{color:"#784af4"},circle:{width:25,height:25,borderRadius:"50%",backgroundColor:"currentColor",marginRight:e.spacing(1),textAlign:"center"},circleText:{color:"#eaeaf0"},completed:{backgroundColor:"#784af4",zIndex:1,fontSize:18}}}));function j(e,t){var n={};return t||(n.name={name:"Dataset Name",value:e.projectName,description:"The human readable moniker for this dataset.",editOnly:!0,paragraph:!0,required:!0},n.descriptionShort={name:"One Line Description",value:e.projectDescriptionShort,editOnly:!0,required:!1,paragraph:!0}),n.dataset={name:"Dataset",file:{multiple:!0,userPrompt:"Drag and drop your dataset files here (or click to use the system file browser)."},value:e.files,descrption:"Please select the dataset files (xlsx & images) that will be used with this dataset."},n}function E(e){var t=e.typeId,n=void 0===t?x.qW.earlyStage:t,o=e.onComplete,l=(0,a.Z)(e,["typeId","onComplete"]),O=(0,c.useRouter)().query.projectId,E=S(),I=(0,g.g)(),N=(0,i.Z)(I,10),F=N[0],T=(N[1],N[2]),D=N[3],R=N[4],B=N[5],M=N[6],q=N[7],A=N[8],W=N[9],_=(0,m.cI)(),U=_.handleSubmit,V=_.register,L=_.control,H=_.errors,z=_.unregister,G=_.watch,Y=_.setValue,Q=(0,u.useState)(0),J=Q[0],X=Q[1],$=(0,u.useState)(),K=$[0],ee=$[1],te=(0,x.GF)(),ne=(0,i.Z)(te,1)[0],re=function(){X(0)};(0,u.useEffect)((function(){R&&X((function(e){return e+1}))}),[R]),(0,u.useEffect)((function(){A&&(X((function(e){return e+1})),o&&o())}),[A]);var oe=[{label:ne?"Additional Data":"Definition"},{label:"Analysis and Upload"},{label:"View Results"}];function ie(e){var t,r;switch(e){case 0:return C("div",null,!ne&&C(s.Z,{variant:"body1"},"Tell us a bit about this dataset and select your files."),C(d.Z,{item:!0,xs:12},C(v.Z,{editing:!0,register:V,control:L,errors:H,unregister:z,setValue:Y,watch:G,fields:j(F,ne)})),C(d.Z,{container:!0,direction:"column"},B&&C(d.Z,{item:!0},C(w.Z,{variant:"overline"},B+"")),C(d.Z,{item:!0},C(s.Z,{variant:"body1",style:{marginBottom:17.5}},"Let's run some analysis on the dataset and get it ready for upload"),C(f.Z,{onClick:U((function(e){return function(e){ee(e),T(e)}(e)})),color:"secondary",variant:"contained",disableElevation:!0,size:"large",className:E.submitButton},D?C(p.Z,{size:20}):"Analyze"))));case 1:return C("div",null,C(s.Z,{variant:"body1"},"Please verify the fields and input data types that will be uploaded."),B&&C(d.Z,{item:!0},B+""),D&&C(p.Z,{size:20}),R&&C(d.Z,{item:!0,xs:12},R.fields&&C(v.Z,{editing:!0,register:V,control:L,errors:H,unregister:z,setValue:Y,watch:G,fields:R.fields.map((function(e){return{key:g.S+e.name,name:e.name,required:!0,paragraph:!0,value:e.type,select:[{key:"Number",value:"number"},{key:"Text",value:"text"},{key:"File Reference",value:"fileReference"}]}}))}),C(d.Z,{container:!0,justifyContent:"flex-start",alignItems:"flex-start",direction:"column"},W&&C(d.Z,{item:!0},W+""),C(d.Z,{item:!0},C(s.Z,{variant:"body1",style:{marginBottom:17.5}},"You're all set to for upload."),C(f.Z,{onClick:U((function(e){return function(e,t){var r=P(P(P({},K),e),{},{typeId:n});t&&(r.projectId=t),M(r)}(e,O)})),color:"secondary",variant:"contained",disableElevation:!0,size:"large",className:E.submitButton},q?C(p.Z,{size:20}):"Upload!"),C(f.Z,{color:"secondary",size:"large",onClick:re,style:{marginLeft:10}},"I need to start over")))));case 2:return C("div",null,W&&C(s.Z,{variant:"body1",style:{marginTop:10}},"An error occured during the upload process.   Please contact your system administrator."),A&&A.response&&C(u.Fragment,null,C(s.Z,{variant:"body1",style:{marginTop:10}},C("strong",null,null===A||void 0===A||null===(t=A.response)||void 0===t||null===(r=t.rows)||void 0===r?void 0:r.length)," "," total rows were uploaded."),C(s.Z,{variant:"body1",style:{marginTop:10}},"Click "," ",C(k.Z,{color:"inherit",href:"/app?projectId=".concat(O,"&datasetId=").concat(A.response.definition._id),underline:"none"},"here")," "," to view your dataset.")));default:return"Unknown step"}}return C(h.Z,(0,r.Z)({activeStep:J,orientation:"vertical"},l),oe.map((function(e,t){var n=e.label;return C(y.Z,{key:n},C(b.Z,null,n),C(Z.Z,null,ie(t)))})))}},9988:function(e,t,n){"use strict";n.d(t,{$N:function(){return Z},mQ:function(){return P}});var r=n(4121),o=n(1229),i=n(8347),a=n(7294),u=n(4670),c=n(1120),l=n(6083),s=n(9525),d=n(6856),f=n(2318),p=n(9803),g=n(5477),m=n(4179),v=n(6010),h=n(2208),y=n(5131),b=a.createElement,Z=(0,u.Z)((function(e){return{root:{margin:0,padding:e.spacing(2),paddingBottom:0},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},messageBox:{textAlign:"center",paddingLeft:e.spacing(1),paddingRight:e.spacing(1),marginTop:e.spacing(2),paddingTop:e.spacing(1),background:C(e),backgroundClip:"padding-box",paddingBottom:e.spacing(0),borderRadius:"10px 10px 0px 0px",color:e.palette.getContrastText(e.palette.background.paper)}}}))((function(e){var t=e.children,n=e.classes,r=(0,i.Z)(e,["children","classes"]);return b(l.Z,(0,o.Z)({disableTypography:!0,className:n.root},r),b(m.Z,{variant:"h3",display:"block",gutterBottom:!0,className:n.messageBox},t))})),k=(0,u.Z)((function(e){return{root:{padding:"16px, 24px"}}}))(s.Z),w=(0,u.Z)((function(e){return{root:{marginTop:e.spacing(2),padding:"16px, 24px",paddingRight:0,marginBottom:e.spacing(0)}}}))(d.Z);function x(e){var t=e.children,n=e.color,r=e.className,a=(0,i.Z)(e,["children","color","className"]);return b(y.j,(0,o.Z)({variant:"contained",autoFocus:!0,disableElevation:!0,color:n,className:(0,v.Z)(r,"dialog-button")},a),t)}var C=function(e){return e.palette.background.paper},O=(0,c.Z)((function(e){return{messageBox:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),marginTop:e.spacing(3),paddingTop:e.spacing(3),background:C(e),backgroundClip:"padding-box",paddingBottom:e.spacing(2),borderRadius:"10px 10px 0px 0px",color:e.palette.getContrastText(e.palette.background.paper)},button:{padding:e.spacing(1.5),borderRadius:9}}}));function P(e){var t=e.containerId,n=e.onConfirmed,o=e.onCancelled,i=e.onXButton,u=e.open,c=e.message,l=e.title,s=e.confirmText,d=e.confirmColor,v=e.cancelText,y=e.cancelColor,Z=e.error,C=e.inProgress,P=e.requireTextEntry,S=e.textFieldLabel,j=e.textFieldValue,E=e.textFieldInputProps,I=e.includeSpacer,N=O(),F=a.useState(null),T=(0,r.Z)(F,2),D=T[0],R=T[1],B=a.useState(j||""),M=(0,r.Z)(B,2),q=M[0],A=M[1],W=a.useState(!P),_=(0,r.Z)(W,2),U=_[0],V=_[1],L=a.useState(""),H=(0,r.Z)(L,2),z=H[0],G=H[1];return(0,a.useEffect)((function(){A(j)}),[j]),(0,a.useEffect)((function(){V(!P)}),[P]),b(h.kH,{onClose:function(){i?i():o&&o()},containerid:t,"aria-label":l,open:u,title:l,includeSpacer:I},b(k,null,b(f.Z,{variant:"body2",display:"block",gutterBottom:!0,style:{fontWeight:300,lineHeight:1.66,marginBottom:20}},c),(P||j)&&b(p.Z,{variant:"outlined",required:!0,fullWidth:!0,error:D,helperText:D,id:"manual-settings-text-field",label:S||"Enter to continue",value:q||"",onChange:function(e){e.preventDefault(),P&&!e.target.value?(A(e.target.value),R("Required Field"),V(!1),G("")):P&&P.match&&P.match!==e.target.value?(A(e.target.value),R(e.target.name+" must match "+P.match),V(!1),G("")):(A(e.target.value),R(null),V(!0),G(e.target.value))},disabled:!!j,inputProps:E}),Z&&b(m.Z,{variant:"body2",display:"block",gutterBottom:!0,style:{fontWeight:300,lineHeight:1.66}},Z),C&&b(w,null,b(g.Z,{size:48})),!C&&b(w,null,b(x,{className:N.button,disabled:!U,onClick:function(){n(z||j)},color:d},s||"Confirm"),b(x,{className:N.button,onClick:function(){o?o():i&&i()},color:y},v||"Cancel"))))}},2208:function(e,t,n){"use strict";n.d(t,{kH:function(){return v}});var r=n(1229),o=n(8347),i=n(7294),a=n(1120),u=n(8920),c=n(2663),l=n(6083),s=n(7812),d=n(8130),f=n(9681),p=i.createElement,g=(0,a.Z)((function(e){return{root:{height:"max-content",minHeight:"100%",borderRadius:e.shape.borderRadius},closeButton:{padding:e.spacing(1),position:"absolute",top:0,right:0},backdrop:{position:"absolute",backdropFilter:"blur(5px)",borderRadius:e.shape.borderRadius,backgroundColor:f.Tt},paperScrollPaper:{overflow:"visible"}}}));function m(){return p("div",{style:{height:"46px",width:"100%"}})}function v(e){var t=e.children,n=e.label,i=e.onClose,a=e.open,f=e.includeSpacer,v=(0,o.Z)(e,["children","label","onClose","open","includeSpacer"]),h=g(),y=(0,u.Z)();return p(c.Z,(0,r.Z)({"aria-labelledby":"subwindow-dialog-".concat(n),disableAutoFocus:!0,disableEnforceFocus:!0,disableScrollLock:!0,disablePortal:!0,className:h.root,classes:{paperScrollPaper:h.paperScrollPaper},BackdropProps:{classes:{root:h.backdrop}},style:{position:"absolute",zIndex:y.zIndex.speedDial},onClose:i,open:a},v),p(l.Z,{className:h.closeButton,disableTypography:!0},p(s.Z,{"aria-label":"close",onClick:i},p(d.Z,null))),f&&p(m,null),t)}},9450:function(e,t,n){"use strict";var r=n(7294),o=n(2087),i=r.createElement;t.Z=function(e){return i(o.Z,e,i("path",{fill:"currentColor",d:"M12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11M4.22,4.22C5.65,2.79 8.75,3.43 12,5.56C15.25,3.43 18.35,2.79 19.78,4.22C21.21,5.65 20.57,8.75 18.44,12C20.57,15.25 21.21,18.35 19.78,19.78C18.35,21.21 15.25,20.57 12,18.44C8.75,20.57 5.65,21.21 4.22,19.78C2.79,18.35 3.43,15.25 5.56,12C3.43,8.75 2.79,5.65 4.22,4.22M15.54,8.46C16.15,9.08 16.71,9.71 17.23,10.34C18.61,8.21 19.11,6.38 18.36,5.64C17.62,4.89 15.79,5.39 13.66,6.77C14.29,7.29 14.92,7.85 15.54,8.46M8.46,15.54C7.85,14.92 7.29,14.29 6.77,13.66C5.39,15.79 4.89,17.62 5.64,18.36C6.38,19.11 8.21,18.61 10.34,17.23C9.71,16.71 9.08,16.15 8.46,15.54M5.64,5.64C4.89,6.38 5.39,8.21 6.77,10.34C7.29,9.71 7.85,9.08 8.46,8.46C9.08,7.85 9.71,7.29 10.34,6.77C8.21,5.39 6.38,4.89 5.64,5.64M9.88,14.12C10.58,14.82 11.3,15.46 12,16.03C12.7,15.46 13.42,14.82 14.12,14.12C14.82,13.42 15.46,12.7 16.03,12C15.46,11.3 14.82,10.58 14.12,9.88C13.42,9.18 12.7,8.54 12,7.97C11.3,8.54 10.58,9.18 9.88,9.88C9.18,10.58 8.54,11.3 7.97,12C8.54,12.7 9.18,13.42 9.88,14.12M18.36,18.36C19.11,17.62 18.61,15.79 17.23,13.66C16.71,14.29 16.15,14.92 15.54,15.54C14.92,16.15 14.29,16.71 13.66,17.23C15.79,18.61 17.62,19.11 18.36,18.36Z"}),"   ")}},6782:function(e,t,n){"use strict";var r=n(7294),o=n(2087),i=r.createElement;t.Z=function(e){return i(o.Z,e,i("path",{fill:"currentColor",d:"M13.13 22.19L11.5 18.36C13.07 17.78 14.54 17 15.9 16.09L13.13 22.19M5.64 12.5L1.81 10.87L7.91 8.1C7 9.46 6.22 10.93 5.64 12.5M19.22 4C19.5 4 19.75 4 19.96 4.05C20.13 5.44 19.94 8.3 16.66 11.58C14.96 13.29 12.93 14.6 10.65 15.47L8.5 13.37C9.42 11.06 10.73 9.03 12.42 7.34C15.18 4.58 17.64 4 19.22 4M19.22 2C17.24 2 14.24 2.69 11 5.93C8.81 8.12 7.5 10.53 6.65 12.64C6.37 13.39 6.56 14.21 7.11 14.77L9.24 16.89C9.62 17.27 10.13 17.5 10.66 17.5C10.89 17.5 11.13 17.44 11.36 17.35C13.5 16.53 15.88 15.19 18.07 13C23.73 7.34 21.61 2.39 21.61 2.39S20.7 2 19.22 2M14.54 9.46C13.76 8.68 13.76 7.41 14.54 6.63S16.59 5.85 17.37 6.63C18.14 7.41 18.15 8.68 17.37 9.46C16.59 10.24 15.32 10.24 14.54 9.46M8.88 16.53L7.47 15.12L8.88 16.53M6.24 22L9.88 18.36C9.54 18.27 9.21 18.12 8.91 17.91L4.83 22H6.24M2 22H3.41L8.18 17.24L6.76 15.83L2 20.59V22M2 19.17L6.09 15.09C5.88 14.79 5.73 14.47 5.64 14.12L2 17.76V19.17Z"}))}},8074:function(e,t){"use strict";t.Z=function(e){return e.replace("in:","").replace("out:","")}},5894:function(e,t,n){"use strict";n.d(t,{JM:function(){return p},Jo:function(){return m},v3:function(){return h},WB:function(){return b},FR:function(){return k},pH:function(){return x},pY:function(){return C},g8:function(){return P},Xd:function(){return j},Rl:function(){return I},Tc:function(){return F},RH:function(){return D},$l:function(){return B},wy:function(){return q}});var r=n(809),o=n.n(r),i=n(6265),a=n(4121),u=n(2447),c=n(9742);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return g.apply(this,arguments)}function g(){return(g=(0,u.Z)(o().mark((function e(t,n){var r,i,a,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.ZP)("post",null,n,t);case 2:return r=e.sent,e.next=5,fetch("".concat(c.K1,"/datasets/query/upload"),r);case 5:if(i=e.sent,a=null,i.ok){e.next=19;break}return e.prev=8,e.next=11,i.json();case 11:a=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:throw Error("Server Side error. ".concat(null!==(u=a)&&void 0!==u&&u.err?a.err:""," ").concat(null!==(l=a)&&void 0!==l&&l.msg?a.msg:""," Check network results in dev tools for full results. ").concat(i.status,"  ").concat(i.statusText));case 19:return e.prev=19,e.next=22,i.json();case 22:a=e.sent,e.next=29;break;case 25:throw e.prev=25,e.t1=e.catch(19),console.log(e.t1),Error("Error parsing json response.");case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,null,[[8,14],[19,25]])})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/getDefinitions",{findQuery:{typeId:"source"}},t);case 2:return n=e.sent,e.abrupt("return",n.definitions);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return(y=(0,u.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/getDefinitions",{projectId:t},n);case 2:return r=e.sent,e.abrupt("return",r.definitions);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/getDefinition",{datasetId:t},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/getPredesignDefinition",null,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){if(!e){throw Error("Must supply filter map to filter map serializer.")}var t,n={},r=d(e);try{for(r.s();!(t=r.n()).done;){var o=(0,a.Z)(t.value,2),i=o[0],u=o[1];n[i]=s({fieldUniqueName:i},u)}}catch(c){r.e(c)}finally{r.f()}return n}function C(e,t,n,r){return O.apply(this,arguments)}function O(){return(O=(0,u.Z)(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?x(n):null,e.next=3,(0,c.fy)("datasets/query/getDataset",{datasetId:t,versionId:null===r||void 0===r?void 0:r._id,filter:a},i);case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n,r){return S.apply(this,arguments)}function S(){return(S=(0,u.Z)(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?x(n):null,e.next=3,(0,c.fy)("datasets/query/getDatasetCount",{datasetId:t,versionId:null===r||void 0===r?void 0:r._id,filter:a},i);case 3:return u=e.sent,e.abrupt("return",null===u||void 0===u?void 0:u.count);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){return E.apply(this,arguments)}function E(){return(E=(0,u.Z)(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/saveFilterSet",{datasetId:t,filterSet:n},r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/addBookmark",{datasetId:t,bookmark:n},r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return T.apply(this,arguments)}function T(){return(T=(0,u.Z)(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/deleteBookmark",{datasetId:t,bookmark:n},r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t,n,r,o,i,a){return R.apply(this,arguments)}function R(){return(R=(0,u.Z)(o().mark((function e(t,n,r,i,a,u,l){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving predesign at api"),e.next=3,(0,c.fy)("datasets/query/saveNewPredesign",{predesignDatasetId:t,filterSet:i,existingProjectId:n,datasetName:r,datasetDescription:a,newProject:u},l);case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,u.Z)(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/deleteFilterSet",{datasetId:t,filterSetId:n},r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fy)("datasets/query/deleteDataset",{datasetId:t},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8322:function(e,t,n){"use strict";n.d(t,{yw:function(){return i},Ex:function(){return u}});var r=n(4121),o=(n(7294),n(2804)),i=["curveMonotoneX","curveMonotoneY","curveLinear","curveStep"],a=(0,o.cn)({key:"curveAtom",default:i[0]});function u(){var e=(0,o.FV)(a),t=(0,r.Z)(e,2);return[t[0],t[1]]}},9301:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(4121),o=(n(7294),n(2804)),i=(0,o.cn)({key:"invertAtom",default:"az"});function a(){var e=(0,o.FV)(i),t=(0,r.Z)(e,2);return[t[0],t[1]]}},8554:function(e,t,n){"use strict";n.d(t,{rH:function(){return i},m4:function(){return u}});var r=n(4121),o=(n(7294),n(2804)),i=[1,2,3,4,5],a=(0,o.cn)({key:"lineWidthAtom",default:i[0]});function u(){var e=(0,o.FV)(a),t=(0,r.Z)(e,2);return[t[0],t[1]]}},1911:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r=n(4121),o=n(7294),i=n(2804),a=n(6817),u=(0,i.cn)({key:"shaderAtom",default:null});function c(){var e=(0,i.FV)(u),t=(0,r.Z)(e,2),n=t[0],c=t[1],l=(0,a.N9)();return(0,o.useEffect)((function(){l&&l.response&&c((function(e){return e||l.dimensions[0].fieldUniqueName}))}),[]),[n,c]}},3672:function(e,t,n){"use strict";n.d(t,{D:function(){return a},d:function(){return u}});var r=n(2804),o=n(3138),i=n(4689);function a(){return(0,o.o)(u)||[]}var u=(0,r.nZ)({key:"availableVersionsState",get:function(e){var t=e.get,n=(t(i.jp),t(i.bN));return(null===n||void 0===n?void 0:n.versionHistory)||[]}})},582:function(e,t,n){"use strict";n.d(t,{h:function(){return g},p:function(){return m}});var r=n(809),o=n.n(r),i=n(2447),a=(n(7294),n(2804)),u=n(8364);(0,a.cn)({key:"dimensionFilterAtom",default:!1});var c=n(5894),l=n(4689),s=n(9991),d=n(1388),f=n(3245),p=(n(8180),n(3138)),g=(0,a.nZ)({key:"datasetRowsSelector",get:function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,i,a,p,g,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,r=n(l.W7),i=n(s.or),a=n(d.j8),p=n(u.Yy),g=n(f.oT),m=n(f.D8),!(r&&i&&a&&p&&g)||m){e.next=15;break}return e.next=10,(0,c.pY)(r,a,i,p);case 10:return v=e.sent,console.log("fetched dataset rows ".concat(null===v||void 0===v?void 0:v.length)),e.abrupt("return",{rows:v,serverFilter:a});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function m(){return(0,p.ot)(g)}},4176:function(e,t,n){"use strict";n.d(t,{$:function(){return d},b:function(){return f}});var r=n(9999),o=n(4121),i=n(7294),a=n(2804),u=n(5894),c=n(8364),l=n(8767),s=n(4689),d=(0,a.cn)({key:"datasetBookmarksAtom",default:[]});function f(){var e=(0,a.FV)(d),t=(0,o.Z)(e,2),n=t[0],f=t[1],p=(0,s.GF)(),g=(0,o.Z)(p,3),m=g[0],v=(g[1],g[2],(0,l.useMutation)((function(e){var t=e.datasetId,n=e.bookmark,r=e.token;return(0,u.Rl)(t,n,r)}))),h=(0,l.useMutation)((function(e){var t=e.datasetId,n=e.id,r=e.token;return(0,u.Tc)(t,n,r)})),y=(0,c.dQ)(),b=(0,o.Z)(y,3),Z=b[0];b[1],b[2];return(0,i.useEffect)((function(){f(m&&m.bookmarks||[])}),[m]),[n,function(e){console.log("add bookmark "+e._id);try{if(!m||!m._id)throw Error("No datasetId provided");v.mutate({datasetId:m._id,bookmark:e,token:Z}),!n||null!==n&&void 0!==n&&n.find((function(t){return t._id===e._id}))||f([].concat((0,r.Z)(n),[e]))}catch(t){console.error("usedatasetbookmark error"),console.error(t)}},function(e){console.log("remove bookmark "+e);try{if(!m||!m._id)throw Error("No datasetId provided");h.mutate({datasetId:m._id,id:e,token:Z}),f(n.filter((function(t){return t._id!==e})))}catch(t){console.error("usedatasetbookmark error"),console.error(t)}}]}},4689:function(e,t,n){"use strict";n.d(t,{LJ:function(){return f},uW:function(){return p},aN:function(){return g},GF:function(){return m},bN:function(){return v},W7:function(){return h},hT:function(){return y},GC:function(){return b},qW:function(){return Z},jp:function(){return k}});var r=n(6265),o=n(809),i=n.n(o),a=n(2447),u=(n(7294),n(2804)),c=n(8364),l=n(4705),s=n(5894),d=n(3138),f=(0,u.nZ)({key:"newPredesignModeSelector",get:function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,r=n(l.k),r.projectId,o=r.datasetId,r.predesign,e.abrupt("return","predesign"===o);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function p(){return(0,d.o)(f)}var g=(0,u.nZ)({key:"datasetDefinitionSelector",get:function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,o,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,r=n(l.k),r.projectId,o=r.datasetId,r.predesign,a="predesign"===o,u=n(c.Yy),!o||!u){e.next=17;break}if(console.log("fetching primary definition"),!a){e.next=12;break}return e.next=9,(0,s.FR)(u);case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,(0,s.WB)(o,u);case 14:return e.abrupt("return",e.sent);case 15:e.next=18;break;case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function m(){return(0,d.ot)(g)}var v=(0,u.nZ)({key:"referenceDefinitionSelector",get:function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,r=n(g)){e.next=4;break}return e.abrupt("return",null);case 4:if(!n(f)){e.next=7;break}return e.abrupt("return",r);case 7:if(o=n(k)){e.next=10;break}return e.abrupt("return",null);case 10:if(o!==Z.predesign){e.next=23;break}if(a=n(c.Yy),!r.referenceDatasetId||!a){e.next=19;break}return console.log("Fetching reference definition"),e.next=16,(0,s.WB)(r.referenceDatasetId,a);case 16:return e.abrupt("return",e.sent);case 19:return console.error("No referenceDatasetId!"),e.abrupt("return",null);case 21:e.next=25;break;case 23:if(o!==Z.earlyStage){e.next=25;break}return e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var h=(0,u.nZ)({key:"referenceDefinitionIDSelector",get:function(e){var t=(0,e.get)(v);return t?t._id:null}});function y(){return(0,d.o)(k)}function b(){return y()===Z.predesign}var Z=(0,r.Z)({predesign:"predesign",pd:"predesign",es:"es",earlyStage:"es"},"early stage","es"),k=(0,u.nZ)({key:"datasetTypeSelector",get:function(e){var t=e.get,n=t(g);return t(f)?null:null!==n&&void 0!==n&&n.typeId?Z[n.typeId]:null}})},563:function(e,t,n){"use strict";n.d(t,{q:function(){return i},v:function(){return a}});var r=n(4121),o=(n(7294),n(2804)),i=(0,o.cn)({key:"datasetFilterAtom",default:new Map});function a(){var e=(0,o.FV)(i),t=(0,r.Z)(e,2);return[t[0],t[1]]}},6546:function(e,t,n){"use strict";n.d(t,{R:function(){return i},x:function(){return a}});var r=n(4121),o=(n(7294),n(2804)),i=(0,o.cn)({key:"datasetFilterByBookmarkedAtom",default:{showBookmarks:!1}});function a(){var e=(0,o.FV)(i),t=(0,r.Z)(e,2);return[t[0],t[1]]}},6817:function(e,t,n){"use strict";n.d(t,{N9:function(){return b}});var r=n(4121),o=n(6265),i=(n(7294),n(2804)),a=n(582),u=n(9991),c=n(563),l=n(6546),s=n(4176),d=n(1082),f=n(3138),p=n(8074);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={number:{key:"number",within:function(e,t){return e>=t[0]&&e<=t[1]},extent:d.Wem},text:{key:"text",within:function(e,t,n){return t[0]<=n.scale(e)&&n.scale(e)<=t[1]},extent:function(e){return e.sort()}},date:{key:"date",within:function(e,t,n){return t[0]<=n.scale(e)&&n.scale(e)<=t[1]},extent:d.Wem}},h=function(e,t){return e&&e.map((function(e){var n=t.filter((function(e){return"number"===e.fieldType})).filter((function(t){return!v[t.fieldType].within(e[t.fieldUniqueName],[t.min,t.max])}));return m(m({},e),{},{preFilterRangeViolations:n,hasPreFilterRangeViolations:n.length>0})}))},y=(0,i.nZ)({key:"filteredDataset",get:function(e){var t=e.get,n=t(a.h),o=t(c.q),i=t(l.R),d=t(s.$),f=t(u.or),g=[];null!==f&&void 0!==f&&f.fieldInfo&&n&&(g=f.fieldInfo.filter((function(e){return"text"!==e.fieldType&&"fileReference"!==e.fieldType})).map((function(e){var t,r=m({},e);r.parsedName=(0,p.Z)(r.fieldUniqueName);var o,i,a=null===n||void 0===n||null===(t=n.serverFilter)||void 0===t?void 0:t.get(e.fieldUniqueName);a&&("number"===a.fieldType&&(r.min=null===(o=a.value)||void 0===o?void 0:o[0],r.max=null===(i=a.value)||void 0===i?void 0:i[1]));return r})));return i.showBookmarks?{response:h(d,g),inProgress:!1,error:!1,dimensions:g}:{response:(null===n||void 0===n?void 0:n.rows)&&n.rows.filter((function(e){return Array.from(o).every((function(t){var n=(0,r.Z)(t,2),o=n[0],i=(0,r.Z)(n[1],2),a=i[0],u=i[1],c=null===f||void 0===f?void 0:f.fieldInfo.find((function(e){return e.fieldUniqueName===o}));return v[c.fieldType].within(e[o],[a,u])}))})),inProgress:!1,error:!1,dimensions:g}}});function b(){return(0,f.o)(y)}},3245:function(e,t,n){"use strict";n.d(t,{qG:function(){return p},oT:function(){return g},wg:function(){return m},yt:function(){return h},D8:function(){return y}});var r=n(809),o=n.n(r),i=n(2447),a=n(2804),u=n(8364),c=n(5894),l=n(4689),s=n(9991),d=n(3138),f=n(1388);function p(){return(0,d.o)(y)}var g=(0,a.nZ)({key:"currentDatasetCountState",get:function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,i,a,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get,r=n(l.W7),i=n(s.or),a=n(f.j8),d=n(u.Yy),!(r&&i&&a&&d)){e.next=13;break}return e.next=8,(0,c.g8)(r,a,i,d);case 8:return p=e.sent,console.log("countResponse ".concat(p)),e.abrupt("return",p);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});function m(){return(0,d.ot)(g)}var v=(0,a.cn)({key:"_datasetLimitState",default:1e3});function h(){return(0,a.sJ)(v)}var y=(0,a.nZ)({key:"limitExceededState",get:function(e){var t=e.get,n=t(v),r=t(g);return console.log("assessing limit ".concat(n," > ").concat(r)),r>n}})},5869:function(e,t,n){"use strict";n.d(t,{S:function(){return k},g:function(){return x}});var r=n(809),o=n.n(r),i=n(6265),a=n(2447),u=n(4121),c=n(7294),l=(n(2804),n(8364)),s=n(7460),d=n.n(s);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e,t,n,r){return new Promise((function(o,a,u){console.log("beginning dataset analysis"),console.log(e),console.log(t);var c={};t.forEach((function(e){c[e.name]=e}));var l={};try{d().parse(e,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,step:function(e){},transform:function(e,t){if(l[t]||(l[t]={possibleNumber:!0,possibleImage:!1}),e){var n=Number.parseFloat(e);return n||(l[t].possibleNumber=!1,c[e]&&(l[t].possibleImage=!0),e)}},complete:function(){console.log("done parsing");var e=function(e,t){var n=[],r=t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t):null,o=[],a=[];for(var u in e){var c=e[u],l=c.possibleNumber?"number":c.possibleImage?"fileReference":"text",s={name:u,type:l};if(r){var d=!1,p=!1,g=r[u];g?(s.existingType=g.fieldType,delete r[u],g.fieldType!==l&&(a.push(u),p=!0)):(o.push(u),d=!0),(d||p)&&(s.errors={extraFieldError:d,fieldTypeError:p})}n.push(s)}var m=[];for(key in r)m.push(key);console.log(o),console.log(a),console.log(m),console.log(n);var v=o.length>0||a.length>0||m.length>0?{extraFieldErrors:o,fieldTypeErrors:a,missingFieldErrors:m}:null;return{fieldResults:n,errors:v}}(l,r),t=e.fieldResults,a=e.errors,u={existingDatasetId:n,fields:t,errors:a};console.log(l),console.log(u),o(u)},error:function(e,t){console.log(e),a(e)}})}catch(s){a(s)}}))}var g=n(5894),m=(n(9650),n(8065)),v=n(4689),h=n(9991);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={dataset:{files:[]},scanning:!1,scanResults:null,scanError:null,uploading:!1,uploadingResponse:!1,uploadingError:!1},k="___fIP4f00206d-1464__";function w(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},i={},a=Object.keys(e),u=0;u<a.length;u++){var c=a[u],l=e[c],s=c.split(t);s[1]?i[s[1]]=l:o[c]=l}return console.log(o),console.log(i),o[n]=r?JSON.stringify(i):i,console.log(o),o}function x(){var e=(0,c.useState)(Z),t=e[0],n=e[1],r=(0,l.dQ)(),i=(0,u.Z)(r,3),s=i[0],d=(i[1],i[2],(0,h.Rs)()),f=(0,v.GF)(),y=(0,u.Z)(f,1)[0],x=(0,h.Q9)();function C(){return(C=(0,a.Z)(o().mark((function e(r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("uploading dataset"),e.prev=1,n(b(b({},t),{},{uploading:!0,uploadingError:null,uploadingResults:null})),a=w(r,k,"fieldInfo",!0),y&&x&&(a.createMinorVersion=!0,a.majorVersionId=x._id,a.existingDatasetId=y._id),y&&!x&&(a.existingDatasetId=y._id),console.log("separatedFormData"),console.log(a),u=(0,m.Z)(a,{dataset:!0}),e.next=11,(0,g.JM)(s,u);case 11:if(c=e.sent,console.log(c),null===c||void 0===c||null===(i=c.response)||void 0===i||!i.definition){e.next=17;break}n(b(b({},t),{},{uploading:!1,uploadingError:null,uploadingResults:c})),e.next=18;break;case 17:throw Error("Upload appeared successful but no definition returned.");case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),console.log("upload error"),console.log(e.t0),n(b(b({},t),{},{uploading:!1,uploadingError:e.t0,uploadingResults:null}));case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function O(){return(O=(0,a.Z)(o().mark((function e(r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("scanning dataset files"),e.prev=1,n(b(b({},t),{},{scanning:!0})),i=r.dataset,a=null,u=[],i.forEach((function(e){if("csv"===e.extension){if(a)throw Error("Multiple csv files included, please include only one.");a=e}else u.push(e)})),e.next=9,p(a,u,null===y||void 0===y?void 0:y._id,d);case 9:c=e.sent,n(b(b({},t),{},{scanning:!1,scanResults:c,scanError:null})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("scan error"),console.log(e.t0),n(b(b({},t),{},{scanning:!1,scanResults:null,scanError:e.t0}));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return[t.dataset,function(){n(Z)},function(e){return O.apply(this,arguments)},t.scanning,t.scanResults,t.scanError,function(e){return C.apply(this,arguments)},t.uploading,t.uploadingResults,t.uploadingError]}},8840:function(e,t,n){"use strict";n.d(t,{UV:function(){return c},qn:function(){return s},Xw:function(){return f}});var r=n(4121),o=n(7294),i=n(2804),a=n(6817),u=(0,i.cn)({key:"datasetPageAtom",default:0});function c(){var e=(0,i.FV)(u),t=(0,r.Z)(e,2);return[t[0],t[1]]}var l=(0,i.cn)({key:"datasetRowsPerPageAtom",default:25});function s(){var e=(0,i.FV)(l),t=(0,r.Z)(e,2);return[t[0],t[1]]}var d=(0,i.cn)({key:"pagedDatasetAtom",default:{response:!1,totalCount:0,inProgress:!1,error:!1}});function f(){var e=(0,a.N9)(),t=(0,i.sJ)(u),n=(0,i.sJ)(l),c=(0,i.FV)(d),s=(0,r.Z)(c,2),f=s[0],p=s[1];return(0,o.useEffect)((function(){p({response:[],inProgress:!0}),e&&e.response&&p({response:e.response.slice(t*n,t*n+n),totalCount:e.response.length,inProgress:!1,error:!1})}),[e,t,n]),[f.response,f.totalCount,f.inProgress,f.error]}},1388:function(e,t,n){"use strict";n.d(t,{TE:function(){return a},j8:function(){return u},we:function(){return c}});var r=n(4121),o=(n(7294),n(2804)),i=(n(582),n(4689),n(9991),n(3138)),a=(n(8180),(0,o.cn)({key:"preFilterAtom",default:new Map})),u=(0,o.nZ)({key:"preFilterSelector",get:function(e){var t=(0,e.get)(a);return t||new Map},set:function(e,t){return(0,e.set)(a,t)}});function c(){var e=(0,i.Lx)(u),t=(0,r.Z)(e,2);return[t[0],t[1]]}},7095:function(e,t,n){"use strict";n.d(t,{P:function(){return m}});var r=n(809),o=n.n(r),i=n(6265),a=n(2447),u=n(4121),c=n(7294),l=n(2804),s=n(8364),d=n(6252);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(0,l.cn)({key:"projectAtom",default:{response:!1,inProgress:!1,error:!1,deleting:!1,deletingResponse:!1,deletingError:!1}});function m(e){var t=(0,l.FV)(g),n=(0,u.Z)(t,2),r=n[0],i=n[1],f=(0,s.dQ)(),m=(0,u.Z)(f,3),v=m[0],h=(m[1],m[2],"new"===e);(0,c.useEffect)((function(){!v||!e||h||r.response&&r.response._id+""===e||r.error||r.inProgress||function(){var t=(0,a.Z)(o().mark((function t(){var n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i(p(p({},r),{},{inProgress:!0})),t.next=4,(0,d.GG)(v,e);case 4:if(!((n=t.sent).length>1)){t.next=7;break}throw Error("Error, too many projects matched that id.");case 7:if(a=n&&1===n.length?n[0]:null){t.next=10;break}throw Error("Project ");case 10:if(null!==a&&void 0!==a&&a._id){t.next=12;break}throw Error("response didn't include project id");case 12:i({response:a,inProgress:!1}),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("useProject error"),console.error(t.t0),i({error:t.t0,inProgress:!1});case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}()()}),[v,e,h]);var y=function(){var t=(0,a.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("deleting "+e),i({response:null,inProgress:!1,deleting:!0,deletingResponse:!1,deletingError:!1}),t.next=5,(0,d.th)(v,e);case 5:t.sent,i({response:null,deleting:!1,deletingResponse:!0,deletingError:!1}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("usedatasetbookmark error"),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return[r.response,r.inProgress,r.error,h,y,r.deleting,r.deletingResponse,r.deletingError]}},8966:function(e,t,n){"use strict";n.d(t,{v:function(){return a},Y:function(){return c}});var r=n(4121),o=(n(7294),n(2804)),i=(0,o.cn)({key:"selectedAtom",default:null});function a(){var e=(0,o.FV)(i),t=(0,r.Z)(e,2);return[t[0],t[1]]}var u=(0,o.cn)({key:"hoveredAtom",default:null});function c(){var e=(0,o.FV)(u),t=(0,r.Z)(e,2);return[t[0],t[1]]}},8180:function(e,t,n){"use strict";n.d(t,{ou:function(){return m},aj:function(){return g}});var r=n(4121),o=n(809),i=n.n(o),a=n(2447),u=n(2804),c=n(4689),l=n(3138),s=n(1388),d=n(1229);var f=(0,u.cn)({key:"_selectedFilterSetAtom",default:null}),p=(0,u.nZ)({key:"selectedFilterSetSelector",get:function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,o,a,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.get,o=r(c.jp),a=r(c.aN),u=null===a||void 0===a||null===(n=a.savedFilterSets)||void 0===n?void 0:n[0],o!==c.qW.predesign){e.next=8;break}return e.abrupt("return",u);case 8:return e.abrupt("return",r(f));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),set:function(e,t){var n=e.set;if(n(f,t),"new"===(null===t||void 0===t?void 0:t._id))n(s.j8,new Map);else{var r=function(e){var t=new Map;return null===e||void 0===e||e.forEach((function(e){var n=(0,d.Z)({},e);"number"===n.type&&(n.value=[n.min,n.max]),t.set(n.fieldUniqueName,n)})),t}(null===t||void 0===t?void 0:t.preFilters);n(s.j8,r)}}});function g(){return(0,l.o)(p)}function m(){var e=(0,l.Lx)(p),t=(0,r.Z)(e,2);return[t[0],t[1]]}},9991:function(e,t,n){"use strict";n.d(t,{or:function(){return l},Rs:function(){return d},Vh:function(){return u},Q9:function(){return a}});var r=n(2804);var o=n(3672),i=n(3138);function a(){return(0,i.o)(l)}function u(){return(0,i.Lx)(l)}var c=(0,r.cn)({key:"_selectedVersionAtom",default:null}),l=(0,r.nZ)({key:"selectedVersionState",get:function(e){var t=e.get,n=t(o.d),r=t(c);return!r&&(null===n||void 0===n?void 0:n.length)>0?(console.log("returning default selected version"),n[0]):r},set:function(e,t){return(0,e.set)(c,t)}}),s=(0,r.nZ)({key:"selectedVersionFieldLookupState",get:function(e){var t,n,r=(0,e.get)(l);return r?(t=r.fieldInfo,n="fieldUniqueName",t.reduce((function(e,t){return e[t[n]]=t,e}),{})):{}}});function d(){return(0,i.o)(s)}}}]);